import{a as se,i as ne,s as oe,f as A,M as ie,y as B,b as K,e as ye,z as g,d as J,H as U,k as R,h as ue,t as G,j as fe,l as L,R as re,o as _e,aq as X,$ as z,a1 as Oe,be as Y,as as Ae,w as ce,A as C,C as T,x as he,K as P,c as Q,m as V,O as Z,n as W,G as De}from"../lite.js";import{a as v}from"./index-B9I6rkKj.js";import{B as Ce}from"./BlockTitle-D4CNaxht.js";import{D as Ee}from"./DropdownArrow-DIboSv6l.js";function x(l,t,e){const r=l.slice();return r[24]=t[e],r}function $(l){let t,e,r,h,f,u=X(l[1]),s=[];for(let n=0;n<u.length;n+=1)s[n]=ee(x(l,u,n));return{c(){t=B("ul");for(let n=0;n<s.length;n+=1)s[n].c();g(t,"class","options svelte-y6qw75"),g(t,"role","listbox"),z(t,"top",l[9]),z(t,"bottom",l[10]),z(t,"max-height",`calc(${l[11]}px - var(--window-padding))`),z(t,"width",l[8]+"px")},m(n,b){J(n,t,b);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(t,null);l[21](t),r=!0,h||(f=U(t,"mousedown",Oe(l[20])),h=!0)},p(n,b){if(b&307){u=X(n[1]);let o;for(o=0;o<u.length;o+=1){const a=x(n,u,o);s[o]?s[o].p(a,b):(s[o]=ee(a),s[o].c(),s[o].m(t,null))}for(;o<s.length;o+=1)s[o].d(1);s.length=u.length}b&512&&z(t,"top",n[9]),b&1024&&z(t,"bottom",n[10]),b&2048&&z(t,"max-height",`calc(${n[11]}px - var(--window-padding))`),b&256&&z(t,"width",n[8]+"px")},i(n){r||(n&&ie(()=>{r&&(e||(e=Y(t,v,{duration:200,y:5},!0)),e.run(1))}),r=!0)},o(n){n&&(e||(e=Y(t,v,{duration:200,y:5},!1)),e.run(0)),r=!1},d(n){n&&L(t),Ae(s,n),l[21](null),n&&e&&e.end(),h=!1,f()}}}function ee(l){let t,e,r,h=l[0][l[24]][0]+"",f,u,s,n,b;return{c(){t=B("li"),e=B("span"),e.textContent="âœ“",r=K(),f=ce(h),u=K(),g(e,"class","inner-item svelte-y6qw75"),C(e,"hide",!l[4].includes(l[24])),g(t,"class","item svelte-y6qw75"),g(t,"data-index",s=l[24]),g(t,"aria-label",n=l[0][l[24]][0]),g(t,"data-testid","dropdown-option"),g(t,"role","option"),g(t,"aria-selected",b=l[4].includes(l[24])),C(t,"selected",l[4].includes(l[24])),C(t,"active",l[24]===l[5]),C(t,"bg-gray-100",l[24]===l[5]),C(t,"dark:bg-gray-600",l[24]===l[5]),z(t,"width",l[8]+"px")},m(o,a){J(o,t,a),T(t,e),T(t,r),T(t,f),T(t,u)},p(o,a){a&18&&C(e,"hide",!o[4].includes(o[24])),a&3&&h!==(h=o[0][o[24]][0]+"")&&he(f,h),a&2&&s!==(s=o[24])&&g(t,"data-index",s),a&3&&n!==(n=o[0][o[24]][0])&&g(t,"aria-label",n),a&18&&b!==(b=o[4].includes(o[24]))&&g(t,"aria-selected",b),a&18&&C(t,"selected",o[4].includes(o[24])),a&34&&C(t,"active",o[24]===o[5]),a&34&&C(t,"bg-gray-100",o[24]===o[5]),a&34&&C(t,"dark:bg-gray-600",o[24]===o[5]),a&256&&z(t,"width",o[8]+"px")},d(o){o&&L(t)}}}function qe(l){let t,e,r,h,f;ie(l[18]);let u=l[2]&&!l[3]&&$(l);return{c(){t=B("div"),e=K(),u&&u.c(),r=ye(),g(t,"class","reference")},m(s,n){J(s,t,n),l[19](t),J(s,e,n),u&&u.m(s,n),J(s,r,n),h||(f=[U(window,"scroll",l[13]),U(window,"resize",l[18])],h=!0)},p(s,[n]){s[2]&&!s[3]?u?(u.p(s,n),n&12&&R(u,1)):(u=$(s),u.c(),R(u,1),u.m(r.parentNode,r)):u&&(ue(),G(u,1,1,()=>{u=null}),fe())},i(s){R(u)},o(s){G(u)},d(s){s&&(L(t),L(e),L(r)),l[19](null),u&&u.d(s),h=!1,re(f)}}}function Ne(l,t,e){let{choices:r}=t,{filtered_indices:h}=t,{show_options:f=!1}=t,{disabled:u=!1}=t,{selected_indices:s=[]}=t,{active_index:n=null}=t,b,o,a,O,y,q,p,i,c,D;function k(){const{top:d,bottom:I}=y.getBoundingClientRect();e(15,b=d),e(16,o=D-I)}let m=null;function j(){f&&(m!==null&&clearTimeout(m),m=setTimeout(()=>{k(),m=null},10))}const H=_e();function N(){e(12,D=window.innerHeight)}function E(d){P[d?"unshift":"push"](()=>{y=d,e(6,y)})}const w=d=>H("change",d);function S(d){P[d?"unshift":"push"](()=>{q=d,e(7,q)})}return l.$$set=d=>{"choices"in d&&e(0,r=d.choices),"filtered_indices"in d&&e(1,h=d.filtered_indices),"show_options"in d&&e(2,f=d.show_options),"disabled"in d&&e(3,u=d.disabled),"selected_indices"in d&&e(4,s=d.selected_indices),"active_index"in d&&e(5,n=d.active_index)},l.$$.update=()=>{if(l.$$.dirty&229588){if(f&&y){if(q&&s.length>0){let I=q.querySelectorAll("li");for(const M of Array.from(I))if(M.getAttribute("data-index")===s[0].toString()){q?.scrollTo?.(0,M.offsetTop);break}}k();const d=y.parentElement?.getBoundingClientRect();e(17,a=d?.height||0),e(8,O=d?.width||0)}o>b?(e(9,p=`${b}px`),e(11,c=o),e(10,i=null)):(e(10,i=`${o+a}px`),e(11,c=b-a),e(9,p=null))}},[r,h,f,u,s,n,y,q,O,p,i,c,D,j,H,b,o,a,N,E,w,S]}class Se extends se{constructor(t){super(),ne(this,t,Ne,qe,oe,{choices:0,filtered_indices:1,show_options:2,disabled:3,selected_indices:4,active_index:5})}get choices(){return this.$$.ctx[0]}set choices(t){this.$$set({choices:t}),A()}get filtered_indices(){return this.$$.ctx[1]}set filtered_indices(t){this.$$set({filtered_indices:t}),A()}get show_options(){return this.$$.ctx[2]}set show_options(t){this.$$set({show_options:t}),A()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),A()}get selected_indices(){return this.$$.ctx[4]}set selected_indices(t){this.$$set({selected_indices:t}),A()}get active_index(){return this.$$.ctx[5]}set active_index(t){this.$$set({active_index:t}),A()}}function Te(l,t){return(l%t+t)%t}function te(l,t){return l.reduce((e,r,h)=>((!t||r[0].toLowerCase().includes(t.toLowerCase()))&&e.push(h),e),[])}function ze(l,t,e){l("change",t),e||l("input")}function Be(l,t,e){if(l.key==="Escape")return[!1,t];if((l.key==="ArrowDown"||l.key==="ArrowUp")&&e.length>=0)if(t===null)t=l.key==="ArrowDown"?e[0]:e[e.length-1];else{const r=e.indexOf(t),h=l.key==="ArrowUp"?-1:1;t=e[Te(r+h,e.length)]}return[!0,t]}function He(l){let t;return{c(){t=ce(l[0])},m(e,r){J(e,t,r)},p(e,r){r[0]&1&&he(t,e[0])},d(e){e&&L(t)}}}function le(l){let t,e,r;return e=new Ee({}),{c(){t=B("div"),Q(e.$$.fragment),g(t,"class","icon-wrap svelte-1hfxrpf")},m(h,f){J(h,t,f),V(e,t,null),r=!0},i(h){r||(R(e.$$.fragment,h),r=!0)},o(h){G(e.$$.fragment,h),r=!1},d(h){h&&L(t),W(e)}}}function Re(l){let t,e,r,h,f,u,s,n,b,o,a,O,y,q;e=new Ce({props:{root:l[8],show_label:l[4],info:l[1],$$slots:{default:[He]},$$scope:{ctx:l}}});let p=!l[3]&&le();return a=new Se({props:{show_options:l[13],choices:l[2],filtered_indices:l[11],disabled:l[3],selected_indices:l[12]===null?[]:[l[12]],active_index:l[15]}}),a.$on("change",l[17]),{c(){t=B("div"),Q(e.$$.fragment),r=K(),h=B("div"),f=B("div"),u=B("div"),s=B("input"),b=K(),p&&p.c(),o=K(),Q(a.$$.fragment),g(s,"role","listbox"),g(s,"aria-controls","dropdown-options"),g(s,"aria-expanded",l[13]),g(s,"aria-label",l[0]),g(s,"class","border-none svelte-1hfxrpf"),s.disabled=l[3],g(s,"autocomplete","off"),s.readOnly=n=!l[7],C(s,"subdued",!l[14].includes(l[10])&&!l[6]),g(u,"class","secondary-wrap svelte-1hfxrpf"),g(f,"class","wrap-inner svelte-1hfxrpf"),C(f,"show_options",l[13]),g(h,"class","wrap svelte-1hfxrpf"),g(t,"class","svelte-1hfxrpf"),C(t,"container",l[5])},m(i,c){J(i,t,c),V(e,t,null),T(t,r),T(t,h),T(h,f),T(f,u),T(u,s),Z(s,l[10]),l[30](s),T(u,b),p&&p.m(u,null),T(h,o),V(a,h,null),O=!0,y||(q=[U(s,"input",l[29]),U(s,"keydown",l[20]),U(s,"keyup",l[31]),U(s,"blur",l[19]),U(s,"focus",l[18])],y=!0)},p(i,c){const D={};c[0]&256&&(D.root=i[8]),c[0]&16&&(D.show_label=i[4]),c[0]&2&&(D.info=i[1]),c[0]&1|c[1]&16&&(D.$$scope={dirty:c,ctx:i}),e.$set(D),(!O||c[0]&8192)&&g(s,"aria-expanded",i[13]),(!O||c[0]&1)&&g(s,"aria-label",i[0]),(!O||c[0]&8)&&(s.disabled=i[3]),(!O||c[0]&128&&n!==(n=!i[7]))&&(s.readOnly=n),c[0]&1024&&s.value!==i[10]&&Z(s,i[10]),(!O||c[0]&17472)&&C(s,"subdued",!i[14].includes(i[10])&&!i[6]),i[3]?p&&(ue(),G(p,1,1,()=>{p=null}),fe()):p?c[0]&8&&R(p,1):(p=le(),p.c(),R(p,1),p.m(u,null)),(!O||c[0]&8192)&&C(f,"show_options",i[13]);const k={};c[0]&8192&&(k.show_options=i[13]),c[0]&4&&(k.choices=i[2]),c[0]&2048&&(k.filtered_indices=i[11]),c[0]&8&&(k.disabled=i[3]),c[0]&4096&&(k.selected_indices=i[12]===null?[]:[i[12]]),c[0]&32768&&(k.active_index=i[15]),a.$set(k),(!O||c[0]&32)&&C(t,"container",i[5])},i(i){O||(R(e.$$.fragment,i),R(p),R(a.$$.fragment,i),O=!0)},o(i){G(e.$$.fragment,i),G(p),G(a.$$.fragment,i),O=!1},d(i){i&&L(t),W(e),l[30](null),p&&p.d(),W(a),y=!1,re(q)}}}function Ue(l,t,e){let{label:r}=t,{info:h=void 0}=t,{value:f=void 0}=t,u,{value_is_output:s=!1}=t,{choices:n}=t,b,{disabled:o=!1}=t,{show_label:a}=t,{container:O=!0}=t,{allow_custom_value:y=!1}=t,{filterable:q=!0}=t,{root:p}=t,i,c=!1,D,k,m="",j="",H=!1,N=[],E=null,w=null,S;const d=_e();f&&(S=n.map(_=>_[1]).indexOf(f),w=S,w===-1?(u=f,w=null):([m,u]=n[w],j=m),F());function I(){e(14,D=n.map(_=>_[0])),e(25,k=n.map(_=>_[1]))}const M=typeof window<"u";function F(){I(),f===void 0||Array.isArray(f)&&f.length===0?(e(10,m=""),e(12,w=null)):k.includes(f)?(e(10,m=D[k.indexOf(f)]),e(12,w=k.indexOf(f))):y?(e(10,m=f),e(12,w=null)):(e(10,m=""),e(12,w=null)),e(28,S=w)}function ae(_){if(e(12,w=parseInt(_.detail.target.dataset.index)),isNaN(w)){e(12,w=null);return}e(13,c=!1),e(15,E=null),i.blur()}function de(_){e(11,N=n.map((Je,ke)=>ke)),e(13,c=!0),d("focus")}function be(){y?e(21,f=m):e(10,m=D[k.indexOf(f)]),e(13,c=!1),e(15,E=null),d("blur")}function me(_){e(13,[c,E]=Be(_,E,N),c,(e(15,E),e(2,n),e(24,b),e(6,y),e(10,m),e(11,N),e(9,i),e(26,j),e(12,w),e(28,S),e(27,H),e(25,k))),_.key==="Enter"&&(E!==null?(e(12,w=E),e(13,c=!1),i.blur(),e(15,E=null)):D.includes(m)?(e(12,w=D.indexOf(m)),e(13,c=!1),e(15,E=null),i.blur()):y&&(e(21,f=m),e(12,w=null),e(13,c=!1),e(15,E=null),i.blur()))}De(()=>{e(22,s=!1),e(27,H=!0)});function we(){m=this.value,e(10,m),e(12,w),e(28,S),e(27,H),e(2,n),e(25,k)}function ge(_){P[_?"unshift":"push"](()=>{i=_,e(9,i)})}const pe=_=>d("key_up",{key:_.key,input_value:m});return l.$$set=_=>{"label"in _&&e(0,r=_.label),"info"in _&&e(1,h=_.info),"value"in _&&e(21,f=_.value),"value_is_output"in _&&e(22,s=_.value_is_output),"choices"in _&&e(2,n=_.choices),"disabled"in _&&e(3,o=_.disabled),"show_label"in _&&e(4,a=_.show_label),"container"in _&&e(5,O=_.container),"allow_custom_value"in _&&e(6,y=_.allow_custom_value),"filterable"in _&&e(7,q=_.filterable),"root"in _&&e(8,p=_.root)},l.$$.update=()=>{l.$$.dirty[0]&436211716&&w!==S&&w!==null&&H&&(e(10,[m,f]=n[w],m,(e(21,f),e(12,w),e(28,S),e(27,H),e(2,n),e(25,k))),e(28,S=w),d("select",{index:w,value:k[w],selected:!0})),l.$$.dirty[0]&14680064&&JSON.stringify(u)!==JSON.stringify(f)&&(F(),ze(d,f,s),e(23,u=f)),l.$$.dirty[0]&4&&I(),l.$$.dirty[0]&16780868&&n!==b&&(y||F(),e(24,b=n),e(11,N=te(n,m)),!y&&N.length>0&&e(15,E=N[0]),M&&i===document.activeElement&&e(13,c=!0)),l.$$.dirty[0]&67112004&&m!==j&&(e(11,N=te(n,m)),e(26,j=m),!y&&N.length>0&&e(15,E=N[0]))},[r,h,n,o,a,O,y,q,p,i,m,N,w,c,D,E,d,ae,de,be,me,f,s,u,b,k,j,H,S,we,ge,pe]}class Ke extends se{constructor(t){super(),ne(this,t,Ue,Re,oe,{label:0,info:1,value:21,value_is_output:22,choices:2,disabled:3,show_label:4,container:5,allow_custom_value:6,filterable:7,root:8},null,[-1,-1])}get label(){return this.$$.ctx[0]}set label(t){this.$$set({label:t}),A()}get info(){return this.$$.ctx[1]}set info(t){this.$$set({info:t}),A()}get value(){return this.$$.ctx[21]}set value(t){this.$$set({value:t}),A()}get value_is_output(){return this.$$.ctx[22]}set value_is_output(t){this.$$set({value_is_output:t}),A()}get choices(){return this.$$.ctx[2]}set choices(t){this.$$set({choices:t}),A()}get disabled(){return this.$$.ctx[3]}set disabled(t){this.$$set({disabled:t}),A()}get show_label(){return this.$$.ctx[4]}set show_label(t){this.$$set({show_label:t}),A()}get container(){return this.$$.ctx[5]}set container(t){this.$$set({container:t}),A()}get allow_custom_value(){return this.$$.ctx[6]}set allow_custom_value(t){this.$$set({allow_custom_value:t}),A()}get filterable(){return this.$$.ctx[7]}set filterable(t){this.$$set({filterable:t}),A()}get root(){return this.$$.ctx[8]}set root(t){this.$$set({root:t}),A()}}export{Se as D,ze as a,Be as b,Ke as c,te as h};
//# sourceMappingURL=Dropdown-BukkHOWo.js.map
