import"./IconButtonWrapper.svelte_svelte_type_style_lang-BOpxTcdu.js";import{u as ml,S as go,a as bo}from"./utils-BsGrhMNe.js";import{I as Gt}from"./Image-BRVH1yXn.js";import"./MarkdownCode.svelte_svelte_type_style_lang-BbNPYd4j.js";/* empty css                                                   *//* empty css                                                   */import{I as le}from"./IconButton-B-aAVSzy.js";import{C as Ot}from"./Check-BiRlaMNo.js";import{C as an}from"./Copy-CxQ9EyK2.js";import{C as wo}from"./Clear-By3xiIwg.js";import{E as ko}from"./Edit-BpRIf5rU.js";import{U as po}from"./Undo-DCjBnnSO.js";import{I as Ji}from"./IconButtonWrapper-Cg16aIPK.js";import{F as xn}from"./File-BQ_9P3Ye.js";import{M as el}from"./MarkdownCode-Bt4CP-1t.js";import{s as hl}from"./index-1U2KLzU-.js";import{d as vo}from"./index-CnqicUFC.js";import{C as $o}from"./Community-Dw1micSV.js";import{T as Co}from"./Trash-RbZEwH-j.js";import{M as Wi}from"./Music-CDm0RGMk.js";import{B as yo}from"./Block-DdQws7Te.js";import{B as zo}from"./BlockLabel-DqHge3FF.js";import{S as So}from"./index-Byo0AJ9c.js";import"./StreamingBar.svelte_svelte_type_style_lang-CDNxkBIr.js";import"./file-url-DgijyRSD.js";import"./context-TgWPFwN2.js";import"./prism-python-CCL4vjTv.js";import"./index-831NsrHV.js";import"./svelte/svelte.js";const{SvelteComponent:jo,append:dl,attr:fe,detach:Ho,init:qo,insert:Lo,noop:qn,safe_not_equal:Mo,svg_element:Ln}=window.__gradio__svelte__internal;function No(l){let e,t,n;return{c(){e=Ln("svg"),t=Ln("path"),n=Ln("path"),fe(t,"fill","currentColor"),fe(t,"d","M17.74 30L16 29l4-7h6a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h9v2H6a4 4 0 0 1-4-4V8a4 4 0 0 1 4-4h20a4 4 0 0 1 4 4v12a4 4 0 0 1-4 4h-4.84Z"),fe(n,"fill","currentColor"),fe(n,"d","M8 10h16v2H8zm0 6h10v2H8z"),fe(e,"xmlns","http://www.w3.org/2000/svg"),fe(e,"xmlns:xlink","http://www.w3.org/1999/xlink"),fe(e,"aria-hidden","true"),fe(e,"role","img"),fe(e,"class","iconify iconify--carbon"),fe(e,"width","100%"),fe(e,"height","100%"),fe(e,"preserveAspectRatio","xMidYMid meet"),fe(e,"viewBox","0 0 32 32")},m(i,s){Lo(i,e,s),dl(e,t),dl(e,n)},p:qn,i:qn,o:qn,d(i){i&&Ho(e)}}}class Vo extends jo{constructor(e){super(),qo(this,e,null,No,Mo,{})}}const{SvelteComponent:Do,append:gl,attr:Se,detach:Io,init:Bo,insert:Eo,noop:Mn,safe_not_equal:Ao,svg_element:Nn}=window.__gradio__svelte__internal;function To(l){let e,t,n;return{c(){e=Nn("svg"),t=Nn("circle"),n=Nn("path"),Se(t,"cx","9"),Se(t,"cy","9"),Se(t,"r","8"),Se(t,"class","circle svelte-1m886t3"),Se(n,"d","M5 8l4 4 4-4z"),Se(e,"class","dropdown-arrow svelte-1m886t3"),Se(e,"xmlns","http://www.w3.org/2000/svg"),Se(e,"width","100%"),Se(e,"height","100%"),Se(e,"viewBox","0 0 18 18")},m(i,s){Eo(i,e,s),gl(e,t),gl(e,n)},p:Mn,i:Mn,o:Mn,d(i){i&&Io(e)}}}class Fo extends Do{constructor(e){super(),Bo(this,e,null,To,Ao,{})}}const{SvelteComponent:Zo,append:en,attr:V,detach:Uo,init:Po,insert:Ro,noop:Vn,safe_not_equal:Oo,svg_element:Pt}=window.__gradio__svelte__internal;function Jo(l){let e,t,n,i,s;return{c(){e=Pt("svg"),t=Pt("path"),n=Pt("path"),i=Pt("path"),s=Pt("path"),V(t,"d","M19.1679 9C18.0247 6.46819 15.3006 4.5 11.9999 4.5C8.31459 4.5 5.05104 7.44668 4.54932 11"),V(t,"stroke","currentColor"),V(t,"stroke-width","1.5"),V(t,"stroke-linecap","round"),V(t,"stroke-linejoin","round"),V(n,"d","M16 9H19.4C19.7314 9 20 8.73137 20 8.4V5"),V(n,"stroke","currentColor"),V(n,"stroke-width","1.5"),V(n,"stroke-linecap","round"),V(n,"stroke-linejoin","round"),V(i,"d","M4.88146 15C5.92458 17.5318 8.64874 19.5 12.0494 19.5C15.7347 19.5 18.9983 16.5533 19.5 13"),V(i,"stroke","currentColor"),V(i,"stroke-width","1.5"),V(i,"stroke-linecap","round"),V(i,"stroke-linejoin","round"),V(s,"d","M8.04932 15H4.64932C4.31795 15 4.04932 15.2686 4.04932 15.6V19"),V(s,"stroke","currentColor"),V(s,"stroke-width","1.5"),V(s,"stroke-linecap","round"),V(s,"stroke-linejoin","round"),V(e,"width","100%"),V(e,"height","100%"),V(e,"stroke-width","1.5"),V(e,"viewBox","0 0 24 24"),V(e,"fill","none"),V(e,"xmlns","http://www.w3.org/2000/svg"),V(e,"color","currentColor")},m(o,r){Ro(o,e,r),en(e,t),en(e,n),en(e,i),en(e,s)},p:Vn,i:Vn,o:Vn,d(o){o&&Uo(e)}}}class Wo extends Zo{constructor(e){super(),Po(this,e,null,Jo,Oo,{})}}const{SvelteComponent:Go,append:Yo,attr:je,detach:Ko,init:Qo,insert:Xo,noop:Dn,safe_not_equal:xo,svg_element:bl}=window.__gradio__svelte__internal;function es(l){let e,t;return{c(){e=bl("svg"),t=bl("path"),je(t,"d","M12 20L12 4M12 20L7 15M12 20L17 15"),je(t,"stroke","currentColor"),je(t,"stroke-width","2"),je(t,"stroke-linecap","round"),je(t,"stroke-linejoin","round"),je(e,"width","100%"),je(e,"height","100%"),je(e,"viewBox","0 0 24 24"),je(e,"fill","none"),je(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){Xo(n,e,i),Yo(e,t)},p:Dn,i:Dn,o:Dn,d(n){n&&Ko(e)}}}class ts extends Go{constructor(e){super(),Qo(this,e,null,es,xo,{})}}const ns=async l=>(await Promise.all(l.map(async t=>{if(t.role==="system")return"";let n=t.role==="user"?"ðŸ˜ƒ":"ðŸ¤–",i="";if(t.type==="text"){const s={audio:/<audio.*?src="(\/file=.*?)"/g,video:/<video.*?src="(\/file=.*?)"/g,image:/<img.*?src="(\/file=.*?)".*?\/>|!\[.*?\]\((\/file=.*?)\)/g};i=t.content;for(let[o,r]of Object.entries(s)){let a;for(;(a=r.exec(t.content))!==null;){const _=a[1]||a[2],u=await ml(_);i=i.replace(_,u)}}}else{if(!t.content.value)return"";const s=t.content.component==="video"?t.content.value?.video.path:t.content.value,o=await ml(s);t.content.component==="audio"?i=`<audio controls src="${o}"></audio>`:t.content.component==="video"?i=o:t.content.component==="image"&&(i=`<img src="${o}" />`)}return`${n}: ${i}`}))).join(`
`),Gi=(l,e)=>l.replace('src="/file',`src="${e}file`);function ls(l){return l?l.includes("audio")?"audio":l.includes("video")?"video":l.includes("image")?"image":"file":"file"}function Yi(l){const e=Array.isArray(l.file)?l.file[0]:l.file;return{component:ls(e?.mime_type),value:l.file,alt_text:l.alt_text,constructor_args:{},props:{}}}function is(l,e){if(l===null)return l;const t=new Map;return l.map((n,i)=>{let s=typeof n.content=="string"?{role:n.role,metadata:n.metadata,content:Gi(n.content,e),type:"text",index:i,options:n.options}:"file"in n.content?{content:Yi(n.content),metadata:n.metadata,role:n.role,type:"component",index:i,options:n.options}:{type:"component",...n};const{id:o,title:r,parent_id:a}=n.metadata||{};if(a){const _=t.get(String(a));if(_){const u={...s,children:[]};return _.children.push(u),o&&r&&t.set(String(o),u),null}}if(o&&r){const _={...s,children:[]};return t.set(String(o),_),_}return s}).filter(n=>n!==null)}function os(l,e){return l===null?l:l.flatMap((n,i)=>n.map((s,o)=>{if(s==null)return null;const r=o==0?"user":"assistant";return typeof s=="string"?{role:r,type:"text",content:Gi(s,e),metadata:{title:null},index:[i,o]}:"file"in s?{content:Yi(s),role:r,type:"component",index:[i,o]}:{role:r,content:s,type:"component",index:[i,o]}})).filter(n=>n!=null)}function wl(l){return l.type==="component"}function tn(l,e){const t=l[l.length-1].role==="assistant",n=l[l.length-1].index;return JSON.stringify(n)===JSON.stringify(e[e.length-1].index)&&t}function ss(l,e){const t=[];let n=[],i=null;for(const s of l)(s.role==="assistant"||s.role==="user")&&(s.role===i?n.push(s):(n.length>0&&t.push(n),n=[s],i=s.role));return n.length>0&&t.push(n),t}async function as(l,e,t){let n=[],i=[];return l.forEach(o=>{if(e[o]||o==="file")return;const r=o==="dataframe"?"component":"base",{name:a,component:_}=t(o,r);n.push(a),i.push(_)}),(await Promise.all(i)).forEach((o,r)=>{e[n[r]]=o.default}),e}function rs(l){if(!l)return[];let e=new Set;return l.forEach(t=>{t.type==="component"&&e.add(t.content.component)}),Array.from(e)}function On(l,e=0){let t="";const n="  ".repeat(e);l.metadata?.title&&(t+=`${n}${e>0?"- ":""}${l.metadata.title}
`),typeof l.content=="string"&&(t+=`${n}  ${l.content}
`);const i=l;return i.children?.length>0&&(t+=i.children.map(s=>On(s,e+1)).join("")),t}function _s(l){return Array.isArray(l)?l.map(e=>e.metadata?.title?On(e):e.content).join(`
`):l.metadata?.title?On(l):l.content}function kl(l){return Array.isArray(l)&&l.every(e=>typeof e.content=="string")||!Array.isArray(l)&&typeof l.content=="string"}const{SvelteComponent:us,append:fs,attr:wt,detach:cs,init:ms,insert:hs,noop:In,safe_not_equal:ds,svg_element:pl}=window.__gradio__svelte__internal;function gs(l){let e,t;return{c(){e=pl("svg"),t=pl("path"),wt(t,"d","M11.25 6.61523H9.375V1.36523H11.25V6.61523ZM3.375 1.36523H8.625V6.91636L7.48425 8.62748L7.16737 10.8464C7.14108 11.0248 7.05166 11.1879 6.91535 11.3061C6.77904 11.4242 6.60488 11.4896 6.4245 11.4902H6.375C6.07672 11.4899 5.79075 11.3713 5.57983 11.1604C5.36892 10.9495 5.2503 10.6635 5.25 10.3652V8.11523H2.25C1.85233 8.11474 1.47109 7.95654 1.18989 7.67535C0.908691 7.39415 0.750496 7.01291 0.75 6.61523V3.99023C0.750992 3.29435 1.02787 2.62724 1.51994 2.13517C2.01201 1.64311 2.67911 1.36623 3.375 1.36523Z"),wt(t,"fill","currentColor"),wt(e,"width","100%"),wt(e,"height","100%"),wt(e,"viewBox","0 0 12 12"),wt(e,"fill","none"),wt(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){hs(n,e,i),fs(e,t)},p:In,i:In,o:In,d(n){n&&cs(e)}}}class vl extends us{constructor(e){super(),ms(this,e,null,gs,ds,{})}}const{SvelteComponent:bs,append:ws,attr:kt,detach:ks,init:ps,insert:vs,noop:Bn,safe_not_equal:$s,svg_element:$l}=window.__gradio__svelte__internal;function Cs(l){let e,t;return{c(){e=$l("svg"),t=$l("path"),kt(t,"d","M2.25 8.11523H4.5V10.3652C4.5003 10.6635 4.61892 10.9495 4.82983 11.1604C5.04075 11.3713 5.32672 11.4899 5.625 11.4902H6.42488C6.60519 11.4895 6.77926 11.4241 6.91549 11.3059C7.05172 11.1878 7.14109 11.0248 7.16737 10.8464L7.48425 8.62748L8.82562 6.61523H11.25V1.36523H3.375C2.67911 1.36623 2.01201 1.64311 1.51994 2.13517C1.02787 2.62724 0.750992 3.29435 0.75 3.99023V6.61523C0.750496 7.01291 0.908691 7.39415 1.18989 7.67535C1.47109 7.95654 1.85233 8.11474 2.25 8.11523ZM9 2.11523H10.5V5.86523H9V2.11523ZM1.5 3.99023C1.5006 3.49314 1.69833 3.01657 2.04983 2.66507C2.40133 2.31356 2.8779 2.11583 3.375 2.11523H8.25V6.12661L6.76575 8.35298L6.4245 10.7402H5.625C5.52554 10.7402 5.43016 10.7007 5.35983 10.6304C5.28951 10.5601 5.25 10.4647 5.25 10.3652V7.36523H2.25C2.05118 7.36494 1.86059 7.28582 1.72 7.14524C1.57941 7.00465 1.5003 6.81406 1.5 6.61523V3.99023Z"),kt(t,"fill","currentColor"),kt(e,"width","100%"),kt(e,"height","100%"),kt(e,"viewBox","0 0 12 12"),kt(e,"fill","none"),kt(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){vs(n,e,i),ws(e,t)},p:Bn,i:Bn,o:Bn,d(n){n&&ks(e)}}}class Cl extends bs{constructor(e){super(),ps(this,e,null,Cs,$s,{})}}const{SvelteComponent:ys,append:zs,attr:pt,detach:Ss,init:js,insert:Hs,noop:En,safe_not_equal:qs,svg_element:yl}=window.__gradio__svelte__internal;function Ls(l){let e,t;return{c(){e=yl("svg"),t=yl("path"),pt(t,"d","M0.75 6.24023H2.625V11.4902H0.75V6.24023ZM8.625 11.4902H3.375V5.93911L4.51575 4.22798L4.83263 2.00911C4.85892 1.83065 4.94834 1.66754 5.08465 1.5494C5.22096 1.43125 5.39512 1.36591 5.5755 1.36523H5.625C5.92328 1.36553 6.20925 1.48415 6.42017 1.69507C6.63108 1.90598 6.7497 2.19196 6.75 2.49023V4.74023H9.75C10.1477 4.74073 10.5289 4.89893 10.8101 5.18012C11.0913 5.46132 11.2495 5.84256 11.25 6.24023V8.86523C11.249 9.56112 10.9721 10.2282 10.4801 10.7203C9.98799 11.2124 9.32089 11.4892 8.625 11.4902Z"),pt(t,"fill","currentColor"),pt(e,"width","100%"),pt(e,"height","100%"),pt(e,"viewBox","0 0 12 12"),pt(e,"fill","none"),pt(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){Hs(n,e,i),zs(e,t)},p:En,i:En,o:En,d(n){n&&Ss(e)}}}class zl extends ys{constructor(e){super(),js(this,e,null,Ls,qs,{})}}const{SvelteComponent:Ms,append:Ns,attr:vt,detach:Vs,init:Ds,insert:Is,noop:An,safe_not_equal:Bs,svg_element:Sl}=window.__gradio__svelte__internal;function Es(l){let e,t;return{c(){e=Sl("svg"),t=Sl("path"),vt(t,"d","M9.75 4.74023H7.5V2.49023C7.4997 2.19196 7.38108 1.90598 7.17017 1.69507C6.95925 1.48415 6.67328 1.36553 6.375 1.36523H5.57512C5.39481 1.366 5.22074 1.43138 5.08451 1.54952C4.94828 1.66766 4.85891 1.83072 4.83262 2.00911L4.51575 4.22798L3.17438 6.24023H0.75V11.4902H8.625C9.32089 11.4892 9.98799 11.2124 10.4801 10.7203C10.9721 10.2282 11.249 9.56112 11.25 8.86523V6.24023C11.2495 5.84256 11.0913 5.46132 10.8101 5.18012C10.5289 4.89893 10.1477 4.74073 9.75 4.74023ZM3 10.7402H1.5V6.99023H3V10.7402ZM10.5 8.86523C10.4994 9.36233 10.3017 9.8389 9.95017 10.1904C9.59867 10.5419 9.1221 10.7396 8.625 10.7402H3.75V6.72886L5.23425 4.50248L5.5755 2.11523H6.375C6.47446 2.11523 6.56984 2.15474 6.64017 2.22507C6.71049 2.2954 6.75 2.39078 6.75 2.49023V5.49023H9.75C9.94882 5.49053 10.1394 5.56965 10.28 5.71023C10.4206 5.85082 10.4997 6.04141 10.5 6.24023V8.86523Z"),vt(t,"fill","currentColor"),vt(e,"width","100%"),vt(e,"height","100%"),vt(e,"viewBox","0 0 12 12"),vt(e,"fill","none"),vt(e,"xmlns","http://www.w3.org/2000/svg")},m(n,i){Is(n,e,i),Ns(e,t)},p:An,i:An,o:An,d(n){n&&Vs(e)}}}class jl extends Ms{constructor(e){super(),Ds(this,e,null,Es,Bs,{})}}const{SvelteComponent:As,append:Ts,attr:Dt,detach:Fs,init:Zs,insert:Us,noop:Tn,safe_not_equal:Ps,svg_element:Hl}=window.__gradio__svelte__internal;function Rs(l){let e,t;return{c(){e=Hl("svg"),t=Hl("path"),Dt(t,"fill","currentColor"),Dt(t,"d","M6,30H4V2H28l-5.8,9L28,20H6ZM6,18H24.33L19.8,11l4.53-7H6Z"),Dt(e,"id","icon"),Dt(e,"xmlns","http://www.w3.org/2000/svg"),Dt(e,"viewBox","0 0 32 32"),Dt(e,"fill","none")},m(n,i){Us(n,e,i),Ts(e,t)},p:Tn,i:Tn,o:Tn,d(n){n&&Fs(e)}}}class ql extends As{constructor(e){super(),Zs(this,e,null,Rs,Ps,{})}}const{SvelteComponent:Os,append:Js,attr:It,detach:Ws,init:Gs,insert:Ys,noop:Fn,safe_not_equal:Ks,svg_element:Ll}=window.__gradio__svelte__internal;function Qs(l){let e,t;return{c(){e=Ll("svg"),t=Ll("path"),It(t,"fill","currentColor"),It(t,"d","M4,2H28l-5.8,9L28,20H6v10H4V2z"),It(e,"id","icon"),It(e,"xmlns","http://www.w3.org/2000/svg"),It(e,"viewBox","0 0 32 32"),It(e,"fill","none")},m(n,i){Ys(n,e,i),Js(e,t)},p:Fn,i:Fn,o:Fn,d(n){n&&Ws(e)}}}class Ml extends Os{constructor(e){super(),Gs(this,e,null,Qs,Ks,{})}}const{SvelteComponent:Xs,append:Jn,attr:Wn,check_outros:rn,create_component:tl,destroy_component:nl,destroy_each:xs,detach:Tt,element:Gn,empty:Ki,ensure_array_like:Nl,flush:Zn,group_outros:_n,init:ea,insert:Ft,listen:ta,mount_component:ll,safe_not_equal:na,set_data:la,set_style:Vl,space:il,text:ia,transition_in:te,transition_out:ve}=window.__gradio__svelte__internal;function Dl(l,e,t){const n=l.slice();return n[8]=e[t],n}function Il(l){let e=l[2].includes("Dislike"),t,n=l[2].includes("Like"),i,s,o=e&&Bl(l),r=n&&El(l);return{c(){o&&o.c(),t=il(),r&&r.c(),i=Ki()},m(a,_){o&&o.m(a,_),Ft(a,t,_),r&&r.m(a,_),Ft(a,i,_),s=!0},p(a,_){_&4&&(e=a[2].includes("Dislike")),e?o?(o.p(a,_),_&4&&te(o,1)):(o=Bl(a),o.c(),te(o,1),o.m(t.parentNode,t)):o&&(_n(),ve(o,1,1,()=>{o=null}),rn()),_&4&&(n=a[2].includes("Like")),n?r?(r.p(a,_),_&4&&te(r,1)):(r=El(a),r.c(),te(r,1),r.m(i.parentNode,i)):r&&(_n(),ve(r,1,1,()=>{r=null}),rn())},i(a){s||(te(o),te(r),s=!0)},o(a){ve(o),ve(r),s=!1},d(a){a&&(Tt(t),Tt(i)),o&&o.d(a),r&&r.d(a)}}}function Bl(l){let e,t;return e=new le({props:{Icon:l[0]==="Dislike"?vl:Cl,label:l[0]==="Dislike"?"clicked dislike":"dislike",color:l[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",l[5]),{c(){tl(e.$$.fragment)},m(n,i){ll(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.Icon=n[0]==="Dislike"?vl:Cl),i&1&&(s.label=n[0]==="Dislike"?"clicked dislike":"dislike"),i&1&&(s.color=n[0]==="Dislike"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(s)},i(n){t||(te(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){nl(e,n)}}}function El(l){let e,t;return e=new le({props:{Icon:l[0]==="Like"?zl:jl,label:l[0]==="Like"?"clicked like":"like",color:l[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"}}),e.$on("click",l[6]),{c(){tl(e.$$.fragment)},m(n,i){ll(e,n,i),t=!0},p(n,i){const s={};i&1&&(s.Icon=n[0]==="Like"?zl:jl),i&1&&(s.label=n[0]==="Like"?"clicked like":"like"),i&1&&(s.color=n[0]==="Like"?"var(--color-accent)":"var(--block-label-text-color)"),e.$set(s)},i(n){t||(te(e.$$.fragment,n),t=!0)},o(n){ve(e.$$.fragment,n),t=!1},d(n){nl(e,n)}}}function Al(l){let e,t,n,i,s;t=new le({props:{Icon:l[0]&&l[3].includes(l[0])?Ml:ql,label:"Feedback",color:l[0]&&l[3].includes(l[0])?"var(--color-accent)":"var(--block-label-text-color)"}});let o=Nl(l[3]),r=[];for(let a=0;a<o.length;a+=1)r[a]=Tl(Dl(l,o,a));return{c(){e=Gn("div"),tl(t.$$.fragment),n=il(),i=Gn("div");for(let a=0;a<r.length;a+=1)r[a].c();Wn(i,"class","extra-feedback-options svelte-14rmxes"),Wn(e,"class","extra-feedback no-border svelte-14rmxes")},m(a,_){Ft(a,e,_),ll(t,e,null),Jn(e,n),Jn(e,i);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(i,null);s=!0},p(a,_){const u={};if(_&9&&(u.Icon=a[0]&&a[3].includes(a[0])?Ml:ql),_&9&&(u.color=a[0]&&a[3].includes(a[0])?"var(--color-accent)":"var(--block-label-text-color)"),t.$set(u),_&27){o=Nl(a[3]);let f;for(f=0;f<o.length;f+=1){const c=Dl(a,o,f);r[f]?r[f].p(c,_):(r[f]=Tl(c),r[f].c(),r[f].m(i,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=o.length}},i(a){s||(te(t.$$.fragment,a),s=!0)},o(a){ve(t.$$.fragment,a),s=!1},d(a){a&&Tt(e),nl(t),xs(r,a)}}}function Tl(l){let e,t=l[8]+"",n,i,s;function o(){return l[7](l[8])}return{c(){e=Gn("button"),n=ia(t),Wn(e,"class","extra-feedback-option svelte-14rmxes"),Vl(e,"font-weight",l[0]===l[8]?"bold":"normal")},m(r,a){Ft(r,e,a),Jn(e,n),i||(s=ta(e,"click",o),i=!0)},p(r,a){l=r,a&8&&t!==(t=l[8]+"")&&la(n,t),a&9&&Vl(e,"font-weight",l[0]===l[8]?"bold":"normal")},d(r){r&&Tt(e),i=!1,s()}}}function oa(l){let e=l[2].includes("Like")||l[2].includes("Dislike"),t,n,i,s=e&&Il(l),o=l[3].length>0&&Al(l);return{c(){s&&s.c(),t=il(),o&&o.c(),n=Ki()},m(r,a){s&&s.m(r,a),Ft(r,t,a),o&&o.m(r,a),Ft(r,n,a),i=!0},p(r,[a]){a&4&&(e=r[2].includes("Like")||r[2].includes("Dislike")),e?s?(s.p(r,a),a&4&&te(s,1)):(s=Il(r),s.c(),te(s,1),s.m(t.parentNode,t)):s&&(_n(),ve(s,1,1,()=>{s=null}),rn()),r[3].length>0?o?(o.p(r,a),a&8&&te(o,1)):(o=Al(r),o.c(),te(o,1),o.m(n.parentNode,n)):o&&(_n(),ve(o,1,1,()=>{o=null}),rn())},i(r){i||(te(s),te(o),i=!0)},o(r){ve(s),ve(o),i=!1},d(r){r&&(Tt(t),Tt(n)),s&&s.d(r),o&&o.d(r)}}}function sa(l,e,t){let n,{handle_action:i}=e,{feedback_options:s}=e,{selected:o=null}=e;function r(f){t(0,o=o===f?null:f),i(o)}const a=()=>r("Dislike"),_=()=>r("Like"),u=f=>{r(f),i(o||null)};return l.$$set=f=>{"handle_action"in f&&t(1,i=f.handle_action),"feedback_options"in f&&t(2,s=f.feedback_options),"selected"in f&&t(0,o=f.selected)},l.$$.update=()=>{l.$$.dirty&4&&t(3,n=s.filter(f=>f!=="Like"&&f!=="Dislike"))},[o,i,s,n,r,a,_,u]}class aa extends Xs{constructor(e){super(),ea(this,e,sa,oa,na,{handle_action:1,feedback_options:2,selected:0})}get handle_action(){return this.$$.ctx[1]}set handle_action(e){this.$$set({handle_action:e}),Zn()}get feedback_options(){return this.$$.ctx[2]}set feedback_options(e){this.$$set({feedback_options:e}),Zn()}get selected(){return this.$$.ctx[0]}set selected(e){this.$$set({selected:e}),Zn()}}const{SvelteComponent:ra,create_component:_a,destroy_component:ua,flush:fa,init:ca,mount_component:ma,safe_not_equal:ha,transition_in:da,transition_out:ga}=window.__gradio__svelte__internal,{createEventDispatcher:ba}=window.__gradio__svelte__internal,{onDestroy:wa}=window.__gradio__svelte__internal;function ka(l){let e,t;return e=new le({props:{label:l[0]?"Copied message":"Copy message",Icon:l[0]?Ot:an}}),e.$on("click",l[1]),{c(){_a(e.$$.fragment)},m(n,i){ma(e,n,i),t=!0},p(n,[i]){const s={};i&1&&(s.label=n[0]?"Copied message":"Copy message"),i&1&&(s.Icon=n[0]?Ot:an),e.$set(s)},i(n){t||(da(e.$$.fragment,n),t=!0)},o(n){ga(e.$$.fragment,n),t=!1},d(n){ua(e,n)}}}function pa(l,e,t){const n=ba();let i=!1,{value:s}=e,o;function r(){t(0,i=!0),o&&clearTimeout(o),o=setTimeout(()=>{t(0,i=!1)},2e3)}async function a(){if("clipboard"in navigator)n("copy",{value:s}),await navigator.clipboard.writeText(s),r();else{const _=document.createElement("textarea");_.value=s,_.style.position="absolute",_.style.left="-999999px",document.body.prepend(_),_.select();try{document.execCommand("copy"),r()}catch(u){console.error(u)}finally{_.remove()}}}return wa(()=>{o&&clearTimeout(o)}),l.$$set=_=>{"value"in _&&t(2,s=_.value)},[i,a,s]}class va extends ra{constructor(e){super(),ca(this,e,pa,ka,ha,{value:2})}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),fa()}}const{SvelteComponent:$a,attr:Fl,check_outros:yt,create_component:it,destroy_component:ot,detach:Ze,element:Ca,empty:ol,flush:ee,group_outros:zt,init:ya,insert:Ue,mount_component:st,safe_not_equal:za,space:Rt,transition_in:M,transition_out:T}=window.__gradio__svelte__internal;function Zl(l){let e,t,n,i;return t=new Ji({props:{top_panel:!1,$$slots:{default:[Ha]},$$scope:{ctx:l}}}),{c(){e=Ca("div"),it(t.$$.fragment),Fl(e,"class",n="message-buttons-"+l[6]+" "+l[11]+" message-buttons "+(l[7]!==null&&"with-avatar")+" svelte-j7nkv7")},m(s,o){Ue(s,e,o),st(t,e,null),i=!0},p(s,o){const r={};o&8419135&&(r.$$scope={dirty:o,ctx:s}),t.$set(r),(!i||o&2240&&n!==(n="message-buttons-"+s[6]+" "+s[11]+" message-buttons "+(s[7]!==null&&"with-avatar")+" svelte-j7nkv7"))&&Fl(e,"class",n)},i(s){i||(M(t.$$.fragment,s),i=!0)},o(s){T(t.$$.fragment,s),i=!1},d(s){s&&Ze(e),ot(t)}}}function Sa(l){let e,t,n,i,s,o,r=l[13]&&Ul(l),a=l[2]&&Pl(l),_=l[3]&&Rl(l),u=l[4]&&Ol(l),f=l[0]&&Jl(l);return{c(){r&&r.c(),e=Rt(),a&&a.c(),t=Rt(),_&&_.c(),n=Rt(),u&&u.c(),i=Rt(),f&&f.c(),s=ol()},m(c,b){r&&r.m(c,b),Ue(c,e,b),a&&a.m(c,b),Ue(c,t,b),_&&_.m(c,b),Ue(c,n,b),u&&u.m(c,b),Ue(c,i,b),f&&f.m(c,b),Ue(c,s,b),o=!0},p(c,b){c[13]?r?(r.p(c,b),b&8192&&M(r,1)):(r=Ul(c),r.c(),M(r,1),r.m(e.parentNode,e)):r&&(zt(),T(r,1,1,()=>{r=null}),yt()),c[2]?a?(a.p(c,b),b&4&&M(a,1)):(a=Pl(c),a.c(),M(a,1),a.m(t.parentNode,t)):a&&(zt(),T(a,1,1,()=>{a=null}),yt()),c[3]?_?(_.p(c,b),b&8&&M(_,1)):(_=Rl(c),_.c(),M(_,1),_.m(n.parentNode,n)):_&&(zt(),T(_,1,1,()=>{_=null}),yt()),c[4]?u?(u.p(c,b),b&16&&M(u,1)):(u=Ol(c),u.c(),M(u,1),u.m(i.parentNode,i)):u&&(zt(),T(u,1,1,()=>{u=null}),yt()),c[0]?f?(f.p(c,b),b&1&&M(f,1)):(f=Jl(c),f.c(),M(f,1),f.m(s.parentNode,s)):f&&(zt(),T(f,1,1,()=>{f=null}),yt())},i(c){o||(M(r),M(a),M(_),M(u),M(f),o=!0)},o(c){T(r),T(a),T(_),T(u),T(f),o=!1},d(c){c&&(Ze(e),Ze(t),Ze(n),Ze(i),Ze(s)),r&&r.d(c),a&&a.d(c),_&&_.d(c),u&&u.d(c),f&&f.d(c)}}}function ja(l){let e,t,n,i;return e=new le({props:{label:"Submit",Icon:Ot,disabled:l[8]}}),e.$on("click",l[17]),n=new le({props:{label:"Cancel",Icon:wo,disabled:l[8]}}),n.$on("click",l[18]),{c(){it(e.$$.fragment),t=Rt(),it(n.$$.fragment)},m(s,o){st(e,s,o),Ue(s,t,o),st(n,s,o),i=!0},p(s,o){const r={};o&256&&(r.disabled=s[8]),e.$set(r);const a={};o&256&&(a.disabled=s[8]),n.$set(a)},i(s){i||(M(e.$$.fragment,s),M(n.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),T(n.$$.fragment,s),i=!1},d(s){s&&Ze(t),ot(e,s),ot(n,s)}}}function Ul(l){let e,t;return e=new va({props:{value:l[14]}}),e.$on("copy",l[19]),{c(){it(e.$$.fragment)},m(n,i){st(e,n,i),t=!0},p(n,i){const s={};i&16384&&(s.value=n[14]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){ot(e,n)}}}function Pl(l){let e,t;return e=new le({props:{Icon:Wo,label:"Retry",disabled:l[8]}}),e.$on("click",l[20]),{c(){it(e.$$.fragment)},m(n,i){st(e,n,i),t=!0},p(n,i){const s={};i&256&&(s.disabled=n[8]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){ot(e,n)}}}function Rl(l){let e,t;return e=new le({props:{label:"Undo",Icon:po,disabled:l[8]}}),e.$on("click",l[21]),{c(){it(e.$$.fragment)},m(n,i){st(e,n,i),t=!0},p(n,i){const s={};i&256&&(s.disabled=n[8]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){ot(e,n)}}}function Ol(l){let e,t;return e=new le({props:{label:"Edit",Icon:ko,disabled:l[8]}}),e.$on("click",l[22]),{c(){it(e.$$.fragment)},m(n,i){st(e,n,i),t=!0},p(n,i){const s={};i&256&&(s.disabled=n[8]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){ot(e,n)}}}function Jl(l){let e,t;return e=new aa({props:{handle_action:l[10],feedback_options:l[1],selected:l[9]}}),{c(){it(e.$$.fragment)},m(n,i){st(e,n,i),t=!0},p(n,i){const s={};i&1024&&(s.handle_action=n[10]),i&2&&(s.feedback_options=n[1]),i&512&&(s.selected=n[9]),e.$set(s)},i(n){t||(M(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){ot(e,n)}}}function Ha(l){let e,t,n,i;const s=[ja,Sa],o=[];function r(a,_){return a[5]?0:1}return e=r(l),t=o[e]=s[e](l),{c(){t.c(),n=ol()},m(a,_){o[e].m(a,_),Ue(a,n,_),i=!0},p(a,_){let u=e;e=r(a),e===u?o[e].p(a,_):(zt(),T(o[u],1,1,()=>{o[u]=null}),yt(),t=o[e],t?t.p(a,_):(t=o[e]=s[e](a),t.c()),M(t,1),t.m(n.parentNode,n))},i(a){i||(M(t),i=!0)},o(a){T(t),i=!1},d(a){a&&Ze(n),o[e].d(a)}}}function qa(l){let e,t,n=(l[13]||l[2]||l[3]||l[4]||l[0])&&Zl(l);return{c(){n&&n.c(),e=ol()},m(i,s){n&&n.m(i,s),Ue(i,e,s),t=!0},p(i,[s]){i[13]||i[2]||i[3]||i[4]||i[0]?n?(n.p(i,s),s&8221&&M(n,1)):(n=Zl(i),n.c(),M(n,1),n.m(e.parentNode,e)):n&&(zt(),T(n,1,1,()=>{n=null}),yt())},i(i){t||(M(n),t=!0)},o(i){T(n),t=!1},d(i){i&&Ze(e),n&&n.d(i)}}}function La(l,e,t){let n,i,{likeable:s}=e,{feedback_options:o}=e,{show_retry:r}=e,{show_undo:a}=e,{show_edit:_}=e,{in_edit_mode:u}=e,{show_copy_button:f}=e,{message:c}=e,{position:b}=e,{avatar:m}=e,{generating:h}=e,{current_feedback:w}=e,{handle_action:d}=e,{layout:v}=e,{dispatch:S}=e;const $=()=>d("edit_submit"),C=()=>d("edit_cancel"),x=j=>S("copy",j.detail),ne=()=>d("retry"),z=()=>d("undo"),he=()=>d("edit");return l.$$set=j=>{"likeable"in j&&t(0,s=j.likeable),"feedback_options"in j&&t(1,o=j.feedback_options),"show_retry"in j&&t(2,r=j.show_retry),"show_undo"in j&&t(3,a=j.show_undo),"show_edit"in j&&t(4,_=j.show_edit),"in_edit_mode"in j&&t(5,u=j.in_edit_mode),"show_copy_button"in j&&t(15,f=j.show_copy_button),"message"in j&&t(16,c=j.message),"position"in j&&t(6,b=j.position),"avatar"in j&&t(7,m=j.avatar),"generating"in j&&t(8,h=j.generating),"current_feedback"in j&&t(9,w=j.current_feedback),"handle_action"in j&&t(10,d=j.handle_action),"layout"in j&&t(11,v=j.layout),"dispatch"in j&&t(12,S=j.dispatch)},l.$$.update=()=>{l.$$.dirty&65536&&t(14,n=kl(c)?_s(c):""),l.$$.dirty&98304&&t(13,i=f&&c&&kl(c))},[s,o,r,a,_,u,b,m,h,w,d,v,S,i,n,f,c,$,C,x,ne,z,he]}class Qi extends $a{constructor(e){super(),ya(this,e,La,qa,za,{likeable:0,feedback_options:1,show_retry:2,show_undo:3,show_edit:4,in_edit_mode:5,show_copy_button:15,message:16,position:6,avatar:7,generating:8,current_feedback:9,handle_action:10,layout:11,dispatch:12})}get likeable(){return this.$$.ctx[0]}set likeable(e){this.$$set({likeable:e}),ee()}get feedback_options(){return this.$$.ctx[1]}set feedback_options(e){this.$$set({feedback_options:e}),ee()}get show_retry(){return this.$$.ctx[2]}set show_retry(e){this.$$set({show_retry:e}),ee()}get show_undo(){return this.$$.ctx[3]}set show_undo(e){this.$$set({show_undo:e}),ee()}get show_edit(){return this.$$.ctx[4]}set show_edit(e){this.$$set({show_edit:e}),ee()}get in_edit_mode(){return this.$$.ctx[5]}set in_edit_mode(e){this.$$set({in_edit_mode:e}),ee()}get show_copy_button(){return this.$$.ctx[15]}set show_copy_button(e){this.$$set({show_copy_button:e}),ee()}get message(){return this.$$.ctx[16]}set message(e){this.$$set({message:e}),ee()}get position(){return this.$$.ctx[6]}set position(e){this.$$set({position:e}),ee()}get avatar(){return this.$$.ctx[7]}set avatar(e){this.$$set({avatar:e}),ee()}get generating(){return this.$$.ctx[8]}set generating(e){this.$$set({generating:e}),ee()}get current_feedback(){return this.$$.ctx[9]}set current_feedback(e){this.$$set({current_feedback:e}),ee()}get handle_action(){return this.$$.ctx[10]}set handle_action(e){this.$$set({handle_action:e}),ee()}get layout(){return this.$$.ctx[11]}set layout(e){this.$$set({layout:e}),ee()}get dispatch(){return this.$$.ctx[12]}set dispatch(e){this.$$set({dispatch:e}),ee()}}const{SvelteComponent:Ma,attr:Na,bubble:$t,check_outros:_t,construct_svelte_component:ie,create_component:oe,destroy_component:se,detach:Ge,element:Xi,empty:Nt,flush:ke,group_outros:ut,init:Va,insert:Ye,mount_component:ae,noop:Da,safe_not_equal:Ia,set_style:Ba,transition_in:Q,transition_out:X}=window.__gradio__svelte__internal;function Ea(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],show_label:!1,label:"chatbot-image",show_share_button:!0,i18n:o[6],gradio:{dispatch:Wa}}}}return i&&(e=ie(i,s(l)),e.$on("load",l[17])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[17]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&4&&(a.value=o[2]),r&64&&(a.i18n=o[6]),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Aa(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],show_label:!1,label:"chatbot-image",show_download_button:o[9],display_icon_button_wrapper_top_corner:o[10],i18n:o[6]}}}return i&&(e=ie(i,s(l)),e.$on("load",l[16])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[16]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&4&&(a.value=o[2]),r&512&&(a.show_download_button=o[9]),r&1024&&(a.display_icon_button_wrapper_top_corner=o[10]),r&64&&(a.i18n=o[6]),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Ta(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{autoplay:o[5].autoplay,value:o[2].video||o[2],show_label:!1,show_share_button:!0,i18n:o[6],upload:o[7],display_icon_button_wrapper_top_corner:o[10],show_download_button:o[9],$$slots:{default:[Ra]},$$scope:{ctx:o}}}}return i&&(e=ie(i,s(l)),e.$on("load",l[15])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[15]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&32&&(a.autoplay=o[5].autoplay),r&4&&(a.value=o[2].video||o[2]),r&64&&(a.i18n=o[6]),r&128&&(a.upload=o[7]),r&1024&&(a.display_icon_button_wrapper_top_corner=o[10]),r&512&&(a.show_download_button=o[9]),r&262144&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Fa(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],show_label:!1,show_share_button:!0,i18n:o[6],label:"",waveform_settings:{autoplay:o[5].autoplay},show_download_button:o[9],display_icon_button_wrapper_top_corner:o[10]}}}return i&&(t=ie(i,s(l)),t.$on("load",l[14])),{c(){e=Xi("div"),t&&oe(t.$$.fragment),Ba(e,"position","relative")},m(o,r){Ye(o,e,r),t&&ae(t,e,null),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(t){ut();const a=t;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(t=ie(i,s(o)),t.$on("load",o[14]),oe(t.$$.fragment),Q(t.$$.fragment,1),ae(t,e,null)):t=null}else if(i){const a={};r&4&&(a.value=o[2]),r&64&&(a.i18n=o[6]),r&32&&(a.waveform_settings={autoplay:o[5].autoplay}),r&512&&(a.show_download_button=o[9]),r&1024&&(a.display_icon_button_wrapper_top_corner=o[10]),t.$set(a)}},i(o){n||(t&&Q(t.$$.fragment,o),n=!0)},o(o){t&&X(t.$$.fragment,o),n=!1},d(o){o&&Ge(e),t&&se(t)}}}function Za(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],target:o[3],theme_mode:o[4],bokeh_version:o[5].bokeh_version,caption:"",show_actions_button:!0}}}return i&&(e=ie(i,s(l)),e.$on("load",l[13])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[13]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&4&&(a.value=o[2]),r&8&&(a.target=o[3]),r&16&&(a.theme_mode=o[4]),r&32&&(a.bokeh_version=o[5].bokeh_version),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Ua(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],show_label:!1,i18n:o[6],label:"",interactive:!1,line_breaks:o[5].line_breaks,wrap:!0,root:"",gradio:{dispatch:Ja},datatype:o[5].datatype,latex_delimiters:o[5].latex_delimiters,col_count:o[5].col_count,row_count:o[5].row_count}}}return i&&(e=ie(i,s(l)),e.$on("load",l[12])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[12]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&4&&(a.value=o[2]),r&64&&(a.i18n=o[6]),r&32&&(a.line_breaks=o[5].line_breaks),r&32&&(a.datatype=o[5].datatype),r&32&&(a.latex_delimiters=o[5].latex_delimiters),r&32&&(a.col_count=o[5].col_count),r&32&&(a.row_count=o[5].row_count),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Pa(l){let e,t,n;var i=l[1][l[0]];function s(o,r){return{props:{value:o[2],display_icon_button_wrapper_top_corner:o[10],show_label:!1,i18n:o[6],label:"",_fetch:o[8],allow_preview:!1,interactive:!1,mode:"minimal",fixed_height:1}}}return i&&(e=ie(i,s(l)),e.$on("load",l[11])),{c(){e&&oe(e.$$.fragment),t=Nt()},m(o,r){e&&ae(e,o,r),Ye(o,t,r),n=!0},p(o,r){if(r&3&&i!==(i=o[1][o[0]])){if(e){ut();const a=e;X(a.$$.fragment,1,0,()=>{se(a,1)}),_t()}i?(e=ie(i,s(o)),e.$on("load",o[11]),oe(e.$$.fragment),Q(e.$$.fragment,1),ae(e,t.parentNode,t)):e=null}else if(i){const a={};r&4&&(a.value=o[2]),r&1024&&(a.display_icon_button_wrapper_top_corner=o[10]),r&64&&(a.i18n=o[6]),r&256&&(a._fetch=o[8]),e.$set(a)}},i(o){n||(e&&Q(e.$$.fragment,o),n=!0)},o(o){e&&X(e.$$.fragment,o),n=!1},d(o){o&&Ge(t),e&&se(e,o)}}}function Ra(l){let e;return{c(){e=Xi("track"),Na(e,"kind","captions")},m(t,n){Ye(t,e,n)},p:Da,d(t){t&&Ge(e)}}}function Oa(l){let e,t,n,i;const s=[Pa,Ua,Za,Fa,Ta,Aa,Ea],o=[];function r(a,_){return a[0]==="gallery"?0:a[0]==="dataframe"?1:a[0]==="plot"?2:a[0]==="audio"?3:a[0]==="video"?4:a[0]==="image"?5:a[0]==="html"?6:-1}return~(e=r(l))&&(t=o[e]=s[e](l)),{c(){t&&t.c(),n=Nt()},m(a,_){~e&&o[e].m(a,_),Ye(a,n,_),i=!0},p(a,[_]){let u=e;e=r(a),e===u?~e&&o[e].p(a,_):(t&&(ut(),X(o[u],1,1,()=>{o[u]=null}),_t()),~e?(t=o[e],t?t.p(a,_):(t=o[e]=s[e](a),t.c()),Q(t,1),t.m(n.parentNode,n)):t=null)},i(a){i||(Q(t),i=!0)},o(a){X(t),i=!1},d(a){a&&Ge(n),~e&&o[e].d(a)}}}const Ja=()=>{},Wa=()=>{};function Ga(l,e,t){let{type:n}=e,{components:i}=e,{value:s}=e,{target:o}=e,{theme_mode:r}=e,{props:a}=e,{i18n:_}=e,{upload:u}=e,{_fetch:f}=e,{allow_file_downloads:c}=e,{display_icon_button_wrapper_top_corner:b=!1}=e;function m(C){$t.call(this,l,C)}function h(C){$t.call(this,l,C)}function w(C){$t.call(this,l,C)}function d(C){$t.call(this,l,C)}function v(C){$t.call(this,l,C)}function S(C){$t.call(this,l,C)}function $(C){$t.call(this,l,C)}return l.$$set=C=>{"type"in C&&t(0,n=C.type),"components"in C&&t(1,i=C.components),"value"in C&&t(2,s=C.value),"target"in C&&t(3,o=C.target),"theme_mode"in C&&t(4,r=C.theme_mode),"props"in C&&t(5,a=C.props),"i18n"in C&&t(6,_=C.i18n),"upload"in C&&t(7,u=C.upload),"_fetch"in C&&t(8,f=C._fetch),"allow_file_downloads"in C&&t(9,c=C.allow_file_downloads),"display_icon_button_wrapper_top_corner"in C&&t(10,b=C.display_icon_button_wrapper_top_corner)},[n,i,s,o,r,a,_,u,f,c,b,m,h,w,d,v,S,$]}class Ya extends Ma{constructor(e){super(),Va(this,e,Ga,Oa,Ia,{type:0,components:1,value:2,target:3,theme_mode:4,props:5,i18n:6,upload:7,_fetch:8,allow_file_downloads:9,display_icon_button_wrapper_top_corner:10})}get type(){return this.$$.ctx[0]}set type(e){this.$$set({type:e}),ke()}get components(){return this.$$.ctx[1]}set components(e){this.$$set({components:e}),ke()}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),ke()}get target(){return this.$$.ctx[3]}set target(e){this.$$set({target:e}),ke()}get theme_mode(){return this.$$.ctx[4]}set theme_mode(e){this.$$set({theme_mode:e}),ke()}get props(){return this.$$.ctx[5]}set props(e){this.$$set({props:e}),ke()}get i18n(){return this.$$.ctx[6]}set i18n(e){this.$$set({i18n:e}),ke()}get upload(){return this.$$.ctx[7]}set upload(e){this.$$set({upload:e}),ke()}get _fetch(){return this.$$.ctx[8]}set _fetch(e){this.$$set({_fetch:e}),ke()}get allow_file_downloads(){return this.$$.ctx[9]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),ke()}get display_icon_button_wrapper_top_corner(){return this.$$.ctx[10]}set display_icon_button_wrapper_top_corner(e){this.$$set({display_icon_button_wrapper_top_corner:e}),ke()}}const{SvelteComponent:Ka,append:Fe,attr:ce,check_outros:Qa,create_component:sl,destroy_component:al,detach:rl,element:Ct,empty:Xa,flush:Y,group_outros:xa,init:er,insert:_l,is_function:tr,mount_component:ul,safe_not_equal:nr,set_data:Wl,space:Gl,text:Yl,transition_in:Jt,transition_out:Wt}=window.__gradio__svelte__internal;function lr(l){let e,t,n,i,s,o,r,a=(l[15].content.value?.orig_name||l[15].content.value?.path.split("/").pop()||"file")+"",_,u,f,c,b,m=(l[15].content.value?.orig_name||l[15].content.value?.path||"").split(".").pop().toUpperCase()+"",h,w;return n=new xn({}),{c(){e=Ct("div"),t=Ct("div"),sl(n.$$.fragment),i=Gl(),s=Ct("div"),o=Ct("a"),r=Ct("span"),_=Yl(a),c=Gl(),b=Ct("span"),h=Yl(m),ce(t,"class","file-icon svelte-ulpe0d"),ce(r,"class","file-name svelte-ulpe0d"),ce(o,"data-testid","chatbot-file"),ce(o,"class","file-link svelte-ulpe0d"),ce(o,"href",u=l[15].content.value.url),ce(o,"target","_blank"),ce(o,"download",f=window.__is_colab__?null:l[15].content.value?.orig_name||l[15].content.value?.path.split("/").pop()||"file"),ce(b,"class","file-type svelte-ulpe0d"),ce(s,"class","file-info svelte-ulpe0d"),ce(e,"class","file-container svelte-ulpe0d")},m(d,v){_l(d,e,v),Fe(e,t),ul(n,t,null),Fe(e,i),Fe(e,s),Fe(s,o),Fe(o,r),Fe(r,_),Fe(s,c),Fe(s,b),Fe(b,h),w=!0},p(d,v){(!w||v&32768)&&a!==(a=(d[15].content.value?.orig_name||d[15].content.value?.path.split("/").pop()||"file")+"")&&Wl(_,a),(!w||v&32768&&u!==(u=d[15].content.value.url))&&ce(o,"href",u),(!w||v&32768&&f!==(f=window.__is_colab__?null:d[15].content.value?.orig_name||d[15].content.value?.path.split("/").pop()||"file"))&&ce(o,"download",f),(!w||v&32768)&&m!==(m=(d[15].content.value?.orig_name||d[15].content.value?.path||"").split(".").pop().toUpperCase()+"")&&Wl(h,m)},i(d){w||(Jt(n.$$.fragment,d),w=!0)},o(d){Wt(n.$$.fragment,d),w=!1},d(d){d&&rl(e),al(n)}}}function ir(l){let e,t;return e=new Ya({props:{target:l[6],theme_mode:l[8],props:l[15].content.props,type:l[15].content.component,components:l[9],value:l[15].content.value,display_icon_button_wrapper_top_corner:l[14]>0&&l[13],i18n:l[3],upload:l[5],_fetch:l[2],allow_file_downloads:l[12]}}),e.$on("load",l[16]),{c(){sl(e.$$.fragment)},m(n,i){ul(e,n,i),t=!0},p(n,i){const s={};i&64&&(s.target=n[6]),i&256&&(s.theme_mode=n[8]),i&32768&&(s.props=n[15].content.props),i&32768&&(s.type=n[15].content.component),i&512&&(s.components=n[9]),i&32768&&(s.value=n[15].content.value),i&24576&&(s.display_icon_button_wrapper_top_corner=n[14]>0&&n[13]),i&8&&(s.i18n=n[3]),i&32&&(s.upload=n[5]),i&4&&(s._fetch=n[2]),i&4096&&(s.allow_file_downloads=n[12]),e.$set(s)},i(n){t||(Jt(e.$$.fragment,n),t=!0)},o(n){Wt(e.$$.fragment,n),t=!1},d(n){al(e,n)}}}function or(l){let e,t,n;return t=new el({props:{message:l[15].content,latex_delimiters:l[0],sanitize_html:l[1],render_markdown:l[10],line_breaks:l[4],root:l[7]}}),t.$on("load",function(){tr(l[11])&&l[11].apply(this,arguments)}),{c(){e=Ct("div"),sl(t.$$.fragment),ce(e,"class","message-content")},m(i,s){_l(i,e,s),ul(t,e,null),n=!0},p(i,s){l=i;const o={};s&32768&&(o.message=l[15].content),s&1&&(o.latex_delimiters=l[0]),s&2&&(o.sanitize_html=l[1]),s&1024&&(o.render_markdown=l[10]),s&16&&(o.line_breaks=l[4]),s&128&&(o.root=l[7]),t.$set(o)},i(i){n||(Jt(t.$$.fragment,i),n=!0)},o(i){Wt(t.$$.fragment,i),n=!1},d(i){i&&rl(e),al(t)}}}function sr(l){let e,t,n,i;const s=[or,ir,lr],o=[];function r(a,_){return a[15].type==="text"?0:a[15].type==="component"&&a[15].content.component in a[9]?1:a[15].type==="component"&&a[15].content.component==="file"?2:-1}return~(e=r(l))&&(t=o[e]=s[e](l)),{c(){t&&t.c(),n=Xa()},m(a,_){~e&&o[e].m(a,_),_l(a,n,_),i=!0},p(a,[_]){let u=e;e=r(a),e===u?~e&&o[e].p(a,_):(t&&(xa(),Wt(o[u],1,1,()=>{o[u]=null}),Qa()),~e?(t=o[e],t?t.p(a,_):(t=o[e]=s[e](a),t.c()),Jt(t,1),t.m(n.parentNode,n)):t=null)},i(a){i||(Jt(t),i=!0)},o(a){Wt(t),i=!1},d(a){a&&rl(n),~e&&o[e].d(a)}}}function ar(l,e,t){let{latex_delimiters:n}=e,{sanitize_html:i}=e,{_fetch:s}=e,{i18n:o}=e,{line_breaks:r}=e,{upload:a}=e,{target:_}=e,{root:u}=e,{theme_mode:f}=e,{_components:c}=e,{render_markdown:b}=e,{scroll:m}=e,{allow_file_downloads:h}=e,{display_consecutive_in_same_bubble:w}=e,{thought_index:d}=e,{message:v}=e;const S=()=>m();return l.$$set=$=>{"latex_delimiters"in $&&t(0,n=$.latex_delimiters),"sanitize_html"in $&&t(1,i=$.sanitize_html),"_fetch"in $&&t(2,s=$._fetch),"i18n"in $&&t(3,o=$.i18n),"line_breaks"in $&&t(4,r=$.line_breaks),"upload"in $&&t(5,a=$.upload),"target"in $&&t(6,_=$.target),"root"in $&&t(7,u=$.root),"theme_mode"in $&&t(8,f=$.theme_mode),"_components"in $&&t(9,c=$._components),"render_markdown"in $&&t(10,b=$.render_markdown),"scroll"in $&&t(11,m=$.scroll),"allow_file_downloads"in $&&t(12,h=$.allow_file_downloads),"display_consecutive_in_same_bubble"in $&&t(13,w=$.display_consecutive_in_same_bubble),"thought_index"in $&&t(14,d=$.thought_index),"message"in $&&t(15,v=$.message)},[n,i,s,o,r,a,_,u,f,c,b,m,h,w,d,v,S]}class xi extends Ka{constructor(e){super(),er(this,e,ar,sr,nr,{latex_delimiters:0,sanitize_html:1,_fetch:2,i18n:3,line_breaks:4,upload:5,target:6,root:7,theme_mode:8,_components:9,render_markdown:10,scroll:11,allow_file_downloads:12,display_consecutive_in_same_bubble:13,thought_index:14,message:15})}get latex_delimiters(){return this.$$.ctx[0]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),Y()}get sanitize_html(){return this.$$.ctx[1]}set sanitize_html(e){this.$$set({sanitize_html:e}),Y()}get _fetch(){return this.$$.ctx[2]}set _fetch(e){this.$$set({_fetch:e}),Y()}get i18n(){return this.$$.ctx[3]}set i18n(e){this.$$set({i18n:e}),Y()}get line_breaks(){return this.$$.ctx[4]}set line_breaks(e){this.$$set({line_breaks:e}),Y()}get upload(){return this.$$.ctx[5]}set upload(e){this.$$set({upload:e}),Y()}get target(){return this.$$.ctx[6]}set target(e){this.$$set({target:e}),Y()}get root(){return this.$$.ctx[7]}set root(e){this.$$set({root:e}),Y()}get theme_mode(){return this.$$.ctx[8]}set theme_mode(e){this.$$set({theme_mode:e}),Y()}get _components(){return this.$$.ctx[9]}set _components(e){this.$$set({_components:e}),Y()}get render_markdown(){return this.$$.ctx[10]}set render_markdown(e){this.$$set({render_markdown:e}),Y()}get scroll(){return this.$$.ctx[11]}set scroll(e){this.$$set({scroll:e}),Y()}get allow_file_downloads(){return this.$$.ctx[12]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),Y()}get display_consecutive_in_same_bubble(){return this.$$.ctx[13]}set display_consecutive_in_same_bubble(e){this.$$set({display_consecutive_in_same_bubble:e}),Y()}get thought_index(){return this.$$.ctx[14]}set thought_index(e){this.$$set({thought_index:e}),Y()}get message(){return this.$$.ctx[15]}set message(e){this.$$set({message:e}),Y()}}const{SvelteComponent:rr,add_render_callback:_r,append:nt,attr:pe,check_outros:fl,create_bidirectional_transition:Kl,create_component:un,destroy_component:fn,destroy_each:ur,detach:re,element:St,ensure_array_like:Ql,flush:O,group_outros:cl,init:fr,insert:_e,listen:Xl,mount_component:cn,run_all:cr,safe_not_equal:mr,set_data:bn,set_style:xl,space:Bt,stop_propagation:hr,text:We,toggle_class:ei,transition_in:me,transition_out:qe}=window.__gradio__svelte__internal;function ti(l,e,t){const n=l.slice();return n[21]=e[t],n[23]=t,n}function ni(l){let e;return{c(){e=St("span"),pe(e,"class","loading-spinner svelte-i6yrue")},m(t,n){_e(t,e,n)},d(t){t&&re(e)}}}function li(l){let e,t,n=l[16].metadata.log&&ii(l),i=l[16].metadata.duration!==void 0&&oi(l);return{c(){e=St("span"),n&&n.c(),t=Bt(),i&&i.c(),pe(e,"class","duration svelte-i6yrue")},m(s,o){_e(s,e,o),n&&n.m(e,null),nt(e,t),i&&i.m(e,null)},p(s,o){s[16].metadata.log?n?n.p(s,o):(n=ii(s),n.c(),n.m(e,t)):n&&(n.d(1),n=null),s[16].metadata.duration!==void 0?i?i.p(s,o):(i=oi(s),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(s){s&&re(e),n&&n.d(),i&&i.d()}}}function ii(l){let e=l[16].metadata.log+"",t;return{c(){t=We(e)},m(n,i){_e(n,t,i)},p(n,i){i&65536&&e!==(e=n[16].metadata.log+"")&&bn(t,e)},d(n){n&&re(t)}}}function oi(l){let e,t,n;function i(r,a){return a&65536&&(t=null),t==null&&(t=!!Number.isInteger(r[16].metadata.duration)),t?br:r[16].metadata.duration>=.1?gr:dr}let s=i(l,-1),o=s(l);return{c(){e=We("("),o.c(),n=We(")")},m(r,a){_e(r,e,a),o.m(r,a),_e(r,n,a)},p(r,a){s===(s=i(r,a))&&o?o.p(r,a):(o.d(1),o=s(r),o&&(o.c(),o.m(n.parentNode,n)))},d(r){r&&(re(e),re(n)),o.d(r)}}}function dr(l){let e=(l[16].metadata.duration*1e3).toFixed(1)+"",t,n;return{c(){t=We(e),n=We("ms")},m(i,s){_e(i,t,s),_e(i,n,s)},p(i,s){s&65536&&e!==(e=(i[16].metadata.duration*1e3).toFixed(1)+"")&&bn(t,e)},d(i){i&&(re(t),re(n))}}}function gr(l){let e=l[16].metadata.duration.toFixed(1)+"",t,n;return{c(){t=We(e),n=We("s")},m(i,s){_e(i,t,s),_e(i,n,s)},p(i,s){s&65536&&e!==(e=i[16].metadata.duration.toFixed(1)+"")&&bn(t,e)},d(i){i&&(re(t),re(n))}}}function br(l){let e=l[16].metadata.duration+"",t,n;return{c(){t=We(e),n=We("s")},m(i,s){_e(i,t,s),_e(i,n,s)},p(i,s){s&65536&&e!==(e=i[16].metadata.duration+"")&&bn(t,e)},d(i){i&&(re(t),re(n))}}}function si(l){let e,t,n,i,s;t=new xi({props:{message:l[16],sanitize_html:l[1],latex_delimiters:l[2],render_markdown:l[3],_components:l[4],upload:l[5],thought_index:l[6],target:l[7],root:l[8],theme_mode:l[9],_fetch:l[10],scroll:l[11],allow_file_downloads:l[12],display_consecutive_in_same_bubble:l[13],i18n:l[14],line_breaks:l[15]}});let o=l[16].children?.length>0&&ai(l);return{c(){e=St("div"),un(t.$$.fragment),n=Bt(),o&&o.c(),pe(e,"class","content svelte-i6yrue")},m(r,a){_e(r,e,a),cn(t,e,null),nt(e,n),o&&o.m(e,null),s=!0},p(r,a){const _={};a&65536&&(_.message=r[16]),a&2&&(_.sanitize_html=r[1]),a&4&&(_.latex_delimiters=r[2]),a&8&&(_.render_markdown=r[3]),a&16&&(_._components=r[4]),a&32&&(_.upload=r[5]),a&64&&(_.thought_index=r[6]),a&128&&(_.target=r[7]),a&256&&(_.root=r[8]),a&512&&(_.theme_mode=r[9]),a&1024&&(_._fetch=r[10]),a&2048&&(_.scroll=r[11]),a&4096&&(_.allow_file_downloads=r[12]),a&8192&&(_.display_consecutive_in_same_bubble=r[13]),a&16384&&(_.i18n=r[14]),a&32768&&(_.line_breaks=r[15]),t.$set(_),r[16].children?.length>0?o?(o.p(r,a),a&65536&&me(o,1)):(o=ai(r),o.c(),me(o,1),o.m(e,null)):o&&(cl(),qe(o,1,1,()=>{o=null}),fl())},i(r){s||(me(t.$$.fragment,r),me(o),r&&_r(()=>{s&&(i||(i=Kl(e,hl,{},!0)),i.run(1))}),s=!0)},o(r){qe(t.$$.fragment,r),qe(o),r&&(i||(i=Kl(e,hl,{},!1)),i.run(0)),s=!1},d(r){r&&re(e),fn(t),o&&o.d(),r&&i&&i.end()}}}function ai(l){let e,t,n=Ql(l[16].children),i=[];for(let o=0;o<n.length;o+=1)i[o]=ri(ti(l,n,o));const s=o=>qe(i[o],1,1,()=>{i[o]=null});return{c(){e=St("div");for(let o=0;o<i.length;o+=1)i[o].c();pe(e,"class","children svelte-i6yrue")},m(o,r){_e(o,e,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(o,r){if(r&131071){n=Ql(o[16].children);let a;for(a=0;a<n.length;a+=1){const _=ti(o,n,a);i[a]?(i[a].p(_,r),me(i[a],1)):(i[a]=ri(_),i[a].c(),me(i[a],1),i[a].m(e,null))}for(cl(),a=n.length;a<i.length;a+=1)s(a);fl()}},i(o){if(!t){for(let r=0;r<n.length;r+=1)me(i[r]);t=!0}},o(o){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)qe(i[r]);t=!1},d(o){o&&re(e),ur(i,o)}}}function ri(l){let e,t;return e=new eo({props:{thought:l[21],rtl:l[0],sanitize_html:l[1],latex_delimiters:l[2],render_markdown:l[3],_components:l[4],upload:l[5],thought_index:l[6]+1,target:l[7],root:l[8],theme_mode:l[9],_fetch:l[10],scroll:l[11],allow_file_downloads:l[12],display_consecutive_in_same_bubble:l[13],i18n:l[14],line_breaks:l[15]}}),{c(){un(e.$$.fragment)},m(n,i){cn(e,n,i),t=!0},p(n,i){const s={};i&65536&&(s.thought=n[21]),i&1&&(s.rtl=n[0]),i&2&&(s.sanitize_html=n[1]),i&4&&(s.latex_delimiters=n[2]),i&8&&(s.render_markdown=n[3]),i&16&&(s._components=n[4]),i&32&&(s.upload=n[5]),i&64&&(s.thought_index=n[6]+1),i&128&&(s.target=n[7]),i&256&&(s.root=n[8]),i&512&&(s.theme_mode=n[9]),i&1024&&(s._fetch=n[10]),i&2048&&(s.scroll=n[11]),i&4096&&(s.allow_file_downloads=n[12]),i&8192&&(s.display_consecutive_in_same_bubble=n[13]),i&16384&&(s.i18n=n[14]),i&32768&&(s.line_breaks=n[15]),e.$set(s)},i(n){t||(me(e.$$.fragment,n),t=!0)},o(n){qe(e.$$.fragment,n),t=!1},d(n){fn(e,n)}}}function wr(l){let e,t,n,i,s,o,r,a,_,u,f,c,b;i=new le({props:{Icon:Fo}}),o=new el({props:{message:l[16].metadata?.title||"",render_markdown:l[3],latex_delimiters:l[2],sanitize_html:l[1],root:l[8]}});let m=l[16].metadata?.status==="pending"&&ni(),h=(l[16]?.metadata?.log||l[16]?.metadata?.duration)&&li(l),w=l[17]&&si(l);return{c(){e=St("div"),t=St("div"),n=St("span"),un(i.$$.fragment),s=Bt(),un(o.$$.fragment),r=Bt(),m&&m.c(),a=Bt(),h&&h.c(),u=Bt(),w&&w.c(),pe(n,"class","arrow svelte-i6yrue"),xl(n,"transform",l[17]?"rotate(180deg)":"rotate(0deg)"),pe(t,"class","title svelte-i6yrue"),pe(t,"aria-busy",_=l[16].content===""||l[16].content===null),pe(t,"role","button"),pe(t,"tabindex","0"),ei(t,"expanded",l[17]),pe(e,"class","thought-group svelte-i6yrue")},m(d,v){_e(d,e,v),nt(e,t),nt(t,n),cn(i,n,null),nt(t,s),cn(o,t,null),nt(t,r),m&&m.m(t,null),nt(t,a),h&&h.m(t,null),nt(e,u),w&&w.m(e,null),f=!0,c||(b=[Xl(t,"click",hr(l[18])),Xl(t,"keydown",l[20])],c=!0)},p(d,[v]){v&131072&&xl(n,"transform",d[17]?"rotate(180deg)":"rotate(0deg)");const S={};v&65536&&(S.message=d[16].metadata?.title||""),v&8&&(S.render_markdown=d[3]),v&4&&(S.latex_delimiters=d[2]),v&2&&(S.sanitize_html=d[1]),v&256&&(S.root=d[8]),o.$set(S),d[16].metadata?.status==="pending"?m||(m=ni(),m.c(),m.m(t,a)):m&&(m.d(1),m=null),d[16]?.metadata?.log||d[16]?.metadata?.duration?h?h.p(d,v):(h=li(d),h.c(),h.m(t,null)):h&&(h.d(1),h=null),(!f||v&65536&&_!==(_=d[16].content===""||d[16].content===null))&&pe(t,"aria-busy",_),(!f||v&131072)&&ei(t,"expanded",d[17]),d[17]?w?(w.p(d,v),v&131072&&me(w,1)):(w=si(d),w.c(),me(w,1),w.m(e,null)):w&&(cl(),qe(w,1,1,()=>{w=null}),fl())},i(d){f||(me(i.$$.fragment,d),me(o.$$.fragment,d),me(w),f=!0)},o(d){qe(i.$$.fragment,d),qe(o.$$.fragment,d),qe(w),f=!1},d(d){d&&re(e),fn(i),fn(o),m&&m.d(),h&&h.d(),w&&w.d(),c=!1,cr(b)}}}function kr(l){return"children"in l}function pr(l,e,t){let n,{thought:i}=e,{rtl:s=!1}=e,{sanitize_html:o}=e,{latex_delimiters:r}=e,{render_markdown:a}=e,{_components:_}=e,{upload:u}=e,{thought_index:f}=e,{target:c}=e,{root:b}=e,{theme_mode:m}=e,{_fetch:h}=e,{scroll:w}=e,{allow_file_downloads:d}=e,{display_consecutive_in_same_bubble:v}=e,{i18n:S}=e,{line_breaks:$}=e,C;function x(){t(17,n=!n)}const ne=z=>z.key==="Enter"&&x();return l.$$set=z=>{"thought"in z&&t(19,i=z.thought),"rtl"in z&&t(0,s=z.rtl),"sanitize_html"in z&&t(1,o=z.sanitize_html),"latex_delimiters"in z&&t(2,r=z.latex_delimiters),"render_markdown"in z&&t(3,a=z.render_markdown),"_components"in z&&t(4,_=z._components),"upload"in z&&t(5,u=z.upload),"thought_index"in z&&t(6,f=z.thought_index),"target"in z&&t(7,c=z.target),"root"in z&&t(8,b=z.root),"theme_mode"in z&&t(9,m=z.theme_mode),"_fetch"in z&&t(10,h=z._fetch),"scroll"in z&&t(11,w=z.scroll),"allow_file_downloads"in z&&t(12,d=z.allow_file_downloads),"display_consecutive_in_same_bubble"in z&&t(13,v=z.display_consecutive_in_same_bubble),"i18n"in z&&t(14,S=z.i18n),"line_breaks"in z&&t(15,$=z.line_breaks)},l.$$.update=()=>{l.$$.dirty&524288&&t(16,C={...i,children:kr(i)?i.children:[]}),l.$$.dirty&65536&&t(17,n=C.metadata?.status!=="done")},[s,o,r,a,_,u,f,c,b,m,h,w,d,v,S,$,C,n,x,i,ne]}class eo extends rr{constructor(e){super(),fr(this,e,pr,wr,mr,{thought:19,rtl:0,sanitize_html:1,latex_delimiters:2,render_markdown:3,_components:4,upload:5,thought_index:6,target:7,root:8,theme_mode:9,_fetch:10,scroll:11,allow_file_downloads:12,display_consecutive_in_same_bubble:13,i18n:14,line_breaks:15})}get thought(){return this.$$.ctx[19]}set thought(e){this.$$set({thought:e}),O()}get rtl(){return this.$$.ctx[0]}set rtl(e){this.$$set({rtl:e}),O()}get sanitize_html(){return this.$$.ctx[1]}set sanitize_html(e){this.$$set({sanitize_html:e}),O()}get latex_delimiters(){return this.$$.ctx[2]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),O()}get render_markdown(){return this.$$.ctx[3]}set render_markdown(e){this.$$set({render_markdown:e}),O()}get _components(){return this.$$.ctx[4]}set _components(e){this.$$set({_components:e}),O()}get upload(){return this.$$.ctx[5]}set upload(e){this.$$set({upload:e}),O()}get thought_index(){return this.$$.ctx[6]}set thought_index(e){this.$$set({thought_index:e}),O()}get target(){return this.$$.ctx[7]}set target(e){this.$$set({target:e}),O()}get root(){return this.$$.ctx[8]}set root(e){this.$$set({root:e}),O()}get theme_mode(){return this.$$.ctx[9]}set theme_mode(e){this.$$set({theme_mode:e}),O()}get _fetch(){return this.$$.ctx[10]}set _fetch(e){this.$$set({_fetch:e}),O()}get scroll(){return this.$$.ctx[11]}set scroll(e){this.$$set({scroll:e}),O()}get allow_file_downloads(){return this.$$.ctx[12]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),O()}get display_consecutive_in_same_bubble(){return this.$$.ctx[13]}set display_consecutive_in_same_bubble(e){this.$$set({display_consecutive_in_same_bubble:e}),O()}get i18n(){return this.$$.ctx[14]}set i18n(e){this.$$set({i18n:e}),O()}get line_breaks(){return this.$$.ctx[15]}set line_breaks(e){this.$$set({line_breaks:e}),O()}}const{SvelteComponent:vr,append:Un,assign:to,attr:K,binding_callbacks:$r,check_outros:Et,create_component:Yt,destroy_component:Kt,destroy_each:Cr,detach:Oe,element:jt,empty:no,ensure_array_like:_i,flush:q,get_spread_object:lo,get_spread_update:io,group_outros:At,init:yr,insert:Je,listen:Yn,mount_component:Qt,noop:ui,null_to_empty:fi,run_all:zr,safe_not_equal:Sr,set_input_value:ci,set_style:Pe,space:Kn,toggle_class:I,transition_in:Z,transition_out:J}=window.__gradio__svelte__internal;function mi(l,e,t){const n=l.slice();return n[46]=e[t],n[47]=e,n[48]=t,n}function hi(l){let e,t,n;return t=new Gt({props:{class:"avatar-image",src:l[2]?.url,alt:l[4]+" avatar"}}),{c(){e=jt("div"),Yt(t.$$.fragment),K(e,"class","avatar-container svelte-pcjl1g")},m(i,s){Je(i,e,s),Qt(t,e,null),n=!0},p(i,s){const o={};s[0]&4&&(o.src=i[2]?.url),s[0]&16&&(o.alt=i[4]+" avatar"),t.$set(o)},i(i){n||(Z(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){i&&Oe(e),Kt(t)}}}function jr(l){let e,t,n,i,s,o=l[48],r,a,_;const u=[Lr,qr],f=[];function c(d,v){return d[46]?.metadata?.title?0:1}t=c(l),n=f[t]=u[t](l);const b=()=>l[42](e,o),m=()=>l[42](null,o);function h(){return l[43](l[46])}function w(...d){return l[44](l[46],...d)}return{c(){e=jt("div"),n.c(),K(e,"data-testid",l[4]),K(e,"dir",i=l[12]?"rtl":"ltr"),K(e,"aria-label",s=l[4]+"'s message: "+wi(l[46])),K(e,"class","svelte-pcjl1g"),I(e,"latest",l[21]===l[1].length-1),I(e,"message-markdown-disabled",!l[7]),I(e,"selectable",l[10]),Pe(e,"user-select","text"),Pe(e,"cursor",l[10]?"pointer":"auto"),Pe(e,"text-align",l[12]?"right":"left")},m(d,v){Je(d,e,v),f[t].m(e,null),b(),r=!0,a||(_=[Yn(e,"click",h),Yn(e,"keydown",w)],a=!0)},p(d,v){l=d;let S=t;t=c(l),t===S?f[t].p(l,v):(At(),J(f[S],1,1,()=>{f[S]=null}),Et(),n=f[t],n?n.p(l,v):(n=f[t]=u[t](l),n.c()),Z(n,1),n.m(e,null)),(!r||v[0]&16)&&K(e,"data-testid",l[4]),(!r||v[0]&4096&&i!==(i=l[12]?"rtl":"ltr"))&&K(e,"dir",i),(!r||v[0]&48&&s!==(s=l[4]+"'s message: "+wi(l[46])))&&K(e,"aria-label",s),o!==l[48]&&(m(),o=l[48],b()),(!r||v[0]&2097154)&&I(e,"latest",l[21]===l[1].length-1),(!r||v[0]&128)&&I(e,"message-markdown-disabled",!l[7]),(!r||v[0]&1024)&&I(e,"selectable",l[10]),v[0]&1024&&Pe(e,"cursor",l[10]?"pointer":"auto"),v[0]&4096&&Pe(e,"text-align",l[12]?"right":"left")},i(d){r||(Z(n),r=!0)},o(d){J(n),r=!1},d(d){d&&Oe(e),f[t].d(),m(),a=!1,zr(_)}}}function Hr(l){let e,t,n;return{c(){e=jt("textarea"),K(e,"class","edit-textarea svelte-pcjl1g"),e.autofocus=!0,Pe(e,"width",`max(${l[28]}px, 160px)`),Pe(e,"min-height",`${l[29]}px`)},m(i,s){Je(i,e,s),ci(e,l[0]),e.focus(),t||(n=Yn(e,"input",l[41]),t=!0)},p(i,s){s[0]&1&&ci(e,i[0]),s[0]&268435456&&Pe(e,"width",`max(${i[28]}px, 160px)`),s[0]&536870912&&Pe(e,"min-height",`${i[29]}px`)},i:ui,o:ui,d(i){i&&Oe(e),t=!1,n()}}}function qr(l){let e,t;return e=new xi({props:{message:l[46],sanitize_html:l[9],latex_delimiters:l[8],render_markdown:l[7],_components:l[20],upload:l[16],thought_index:l[48],target:l[17],root:l[18],theme_mode:l[19],_fetch:l[11],scroll:l[22],allow_file_downloads:l[23],display_consecutive_in_same_bubble:l[25],i18n:l[14],line_breaks:l[15]}}),{c(){Yt(e.$$.fragment)},m(n,i){Qt(e,n,i),t=!0},p(n,i){const s={};i[0]&32&&(s.message=n[46]),i[0]&512&&(s.sanitize_html=n[9]),i[0]&256&&(s.latex_delimiters=n[8]),i[0]&128&&(s.render_markdown=n[7]),i[0]&1048576&&(s._components=n[20]),i[0]&65536&&(s.upload=n[16]),i[0]&131072&&(s.target=n[17]),i[0]&262144&&(s.root=n[18]),i[0]&524288&&(s.theme_mode=n[19]),i[0]&2048&&(s._fetch=n[11]),i[0]&4194304&&(s.scroll=n[22]),i[0]&8388608&&(s.allow_file_downloads=n[23]),i[0]&33554432&&(s.display_consecutive_in_same_bubble=n[25]),i[0]&16384&&(s.i18n=n[14]),i[0]&32768&&(s.line_breaks=n[15]),e.$set(s)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){J(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function Lr(l){let e,t;return e=new eo({props:{thought:l[46],rtl:l[12],sanitize_html:l[9],latex_delimiters:l[8],render_markdown:l[7],_components:l[20],upload:l[16],thought_index:l[48],target:l[17],root:l[18],theme_mode:l[19],_fetch:l[11],scroll:l[22],allow_file_downloads:l[23],display_consecutive_in_same_bubble:l[25],i18n:l[14],line_breaks:l[15]}}),{c(){Yt(e.$$.fragment)},m(n,i){Qt(e,n,i),t=!0},p(n,i){const s={};i[0]&32&&(s.thought=n[46]),i[0]&4096&&(s.rtl=n[12]),i[0]&512&&(s.sanitize_html=n[9]),i[0]&256&&(s.latex_delimiters=n[8]),i[0]&128&&(s.render_markdown=n[7]),i[0]&1048576&&(s._components=n[20]),i[0]&65536&&(s.upload=n[16]),i[0]&131072&&(s.target=n[17]),i[0]&262144&&(s.root=n[18]),i[0]&524288&&(s.theme_mode=n[19]),i[0]&2048&&(s._fetch=n[11]),i[0]&4194304&&(s.scroll=n[22]),i[0]&8388608&&(s.allow_file_downloads=n[23]),i[0]&33554432&&(s.display_consecutive_in_same_bubble=n[25]),i[0]&16384&&(s.i18n=n[14]),i[0]&32768&&(s.line_breaks=n[15]),e.$set(s)},i(n){t||(Z(e.$$.fragment,n),t=!0)},o(n){J(e.$$.fragment,n),t=!1},d(n){Kt(e,n)}}}function di(l){let e,t;const n=[l[30],{current_feedback:l[26]}];let i={};for(let s=0;s<n.length;s+=1)i=to(i,n[s]);return e=new Qi({props:i}),e.$on("copy",l[45]),{c(){Yt(e.$$.fragment)},m(s,o){Qt(e,s,o),t=!0},p(s,o){const r=o[0]&1140850688?io(n,[o[0]&1073741824&&lo(s[30]),o[0]&67108864&&{current_feedback:s[26]}]):{};e.$set(r)},i(s){t||(Z(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){Kt(e,s)}}}function gi(l){let e,t,n,i,s,o,r;const a=[Hr,jr],_=[];function u(c,b){return c[24]&&c[48]===c[5].length-1&&c[46].type==="text"?0:1}t=u(l),n=_[t]=a[t](l);let f=l[6]==="panel"&&di(l);return{c(){e=jt("div"),n.c(),s=Kn(),f&&f.c(),o=no(),K(e,"class",i="message "+(l[25]?"":l[4])+" svelte-pcjl1g"),I(e,"panel-full-width",!0),I(e,"message-markdown-disabled",!l[7]),I(e,"component",l[46].type==="component"),I(e,"html",wl(l[46])&&l[46].content.component==="html"),I(e,"thought",l[48]>0)},m(c,b){Je(c,e,b),_[t].m(e,null),Je(c,s,b),f&&f.m(c,b),Je(c,o,b),r=!0},p(c,b){let m=t;t=u(c),t===m?_[t].p(c,b):(At(),J(_[m],1,1,()=>{_[m]=null}),Et(),n=_[t],n?n.p(c,b):(n=_[t]=a[t](c),n.c()),Z(n,1),n.m(e,null)),(!r||b[0]&33554448&&i!==(i="message "+(c[25]?"":c[4])+" svelte-pcjl1g"))&&K(e,"class",i),(!r||b[0]&33554448)&&I(e,"panel-full-width",!0),(!r||b[0]&33554576)&&I(e,"message-markdown-disabled",!c[7]),(!r||b[0]&33554480)&&I(e,"component",c[46].type==="component"),(!r||b[0]&33554480)&&I(e,"html",wl(c[46])&&c[46].content.component==="html"),(!r||b[0]&33554448)&&I(e,"thought",c[48]>0),c[6]==="panel"?f?(f.p(c,b),b[0]&64&&Z(f,1)):(f=di(c),f.c(),Z(f,1),f.m(o.parentNode,o)):f&&(At(),J(f,1,1,()=>{f=null}),Et())},i(c){r||(Z(n),Z(f),r=!0)},o(c){J(n),J(f),r=!1},d(c){c&&(Oe(e),Oe(s),Oe(o)),_[t].d(),f&&f.d(c)}}}function bi(l){let e,t;const n=[l[30]];let i={};for(let s=0;s<n.length;s+=1)i=to(i,n[s]);return e=new Qi({props:i}),{c(){Yt(e.$$.fragment)},m(s,o){Qt(e,s,o),t=!0},p(s,o){const r=o[0]&1073741824?io(n,[lo(s[30])]):{};e.$set(r)},i(s){t||(Z(e.$$.fragment,s),t=!0)},o(s){J(e.$$.fragment,s),t=!1},d(s){Kt(e,s)}}}function Mr(l){let e,t,n,i,s,o,r,a,_,u=l[2]!==null&&hi(l),f=_i(l[5]),c=[];for(let h=0;h<f.length;h+=1)c[h]=gi(mi(l,f,h));const b=h=>J(c[h],1,1,()=>{c[h]=null});let m=l[6]==="bubble"&&bi(l);return{c(){e=jt("div"),u&&u.c(),t=Kn(),n=jt("div"),i=jt("div");for(let h=0;h<c.length;h+=1)c[h].c();r=Kn(),m&&m.c(),a=no(),K(i,"class",s=fi(l[25]?l[4]:"")+" svelte-pcjl1g"),I(i,"message",l[25]),K(n,"class","flex-wrap svelte-pcjl1g"),I(n,"role",l[4]),I(n,"component-wrap",l[5][0].type==="component"),K(e,"class",o="message-row "+l[6]+" "+l[4]+"-row svelte-pcjl1g"),I(e,"with_avatar",l[2]!==null),I(e,"with_opposite_avatar",l[3]!==null)},m(h,w){Je(h,e,w),u&&u.m(e,null),Un(e,t),Un(e,n),Un(n,i);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(i,null);Je(h,r,w),m&&m.m(h,w),Je(h,a,w),_=!0},p(h,w){if(h[2]!==null?u?(u.p(h,w),w[0]&4&&Z(u,1)):(u=hi(h),u.c(),Z(u,1),u.m(e,t)):u&&(At(),J(u,1,1,()=>{u=null}),Et()),w[0]&2147483635|w[1]&1){f=_i(h[5]);let d;for(d=0;d<f.length;d+=1){const v=mi(h,f,d);c[d]?(c[d].p(v,w),Z(c[d],1)):(c[d]=gi(v),c[d].c(),Z(c[d],1),c[d].m(i,null))}for(At(),d=f.length;d<c.length;d+=1)b(d);Et()}(!_||w[0]&33554448&&s!==(s=fi(h[25]?h[4]:"")+" svelte-pcjl1g"))&&K(i,"class",s),(!_||w[0]&33554448)&&I(i,"message",h[25]),(!_||w[0]&16)&&I(n,"role",h[4]),(!_||w[0]&32)&&I(n,"component-wrap",h[5][0].type==="component"),(!_||w[0]&80&&o!==(o="message-row "+h[6]+" "+h[4]+"-row svelte-pcjl1g"))&&K(e,"class",o),(!_||w[0]&84)&&I(e,"with_avatar",h[2]!==null),(!_||w[0]&88)&&I(e,"with_opposite_avatar",h[3]!==null),h[6]==="bubble"?m?(m.p(h,w),w[0]&64&&Z(m,1)):(m=bi(h),m.c(),Z(m,1),m.m(a.parentNode,a)):m&&(At(),J(m,1,1,()=>{m=null}),Et())},i(h){if(!_){Z(u);for(let w=0;w<f.length;w+=1)Z(c[w]);Z(m),_=!0}},o(h){J(u),c=c.filter(Boolean);for(let w=0;w<c.length;w+=1)J(c[w]);J(m),_=!1},d(h){h&&(Oe(e),Oe(r),Oe(a)),u&&u.d(),Cr(c,h),m&&m.d(h)}}}let Nr=!1;function wi(l){return l.type==="text"?l.content:l.type==="component"&&l.content.component==="file"?Array.isArray(l.content.value)?`file of extension type: ${l.content.value[0].orig_name?.split(".").pop()}`:`file of extension type: ${l.content.value?.orig_name?.split(".").pop()}`+(l.content.value?.orig_name??""):`a component of type ${l.content.component??"unknown"}`}function Vr(l,e,t){let{value:n}=e,{avatar_img:i}=e,{opposite_avatar_img:s=null}=e,{role:o="user"}=e,{messages:r=[]}=e,{layout:a}=e,{render_markdown:_}=e,{latex_delimiters:u}=e,{sanitize_html:f}=e,{selectable:c}=e,{_fetch:b}=e,{rtl:m}=e,{dispatch:h}=e,{i18n:w}=e,{line_breaks:d}=e,{upload:v}=e,{target:S}=e,{root:$}=e,{theme_mode:C}=e,{_components:x}=e,{i:ne}=e,{show_copy_button:z}=e,{generating:he}=e,{feedback_options:j}=e,{show_like:Le}=e,{show_edit:Me}=e,{show_retry:Ne}=e,{show_undo:B}=e,{msg_format:Ve}=e,{handle_action:De}=e,{scroll:Ke}=e,{allow_file_downloads:Ie}=e,{in_edit_mode:ye}=e,{edit_message:de}=e,{display_consecutive_in_same_bubble:Qe}=e,{current_feedback:Be=null}=e,ue=[],Xe=0,xe=0;function Ee(p,ge){h("select",{index:ge.index,value:ge.content})}let ze;function Ae(){de=this.value,t(0,de)}function W(p,ge){$r[p?"unshift":"push"](()=>{ue[ge]=p,t(27,ue)})}const et=p=>Ee(ne,p),G=(p,ge)=>{ge.key==="Enter"&&Ee(ne,p)},Vt=p=>h("copy",p.detail);return l.$$set=p=>{"value"in p&&t(1,n=p.value),"avatar_img"in p&&t(2,i=p.avatar_img),"opposite_avatar_img"in p&&t(3,s=p.opposite_avatar_img),"role"in p&&t(4,o=p.role),"messages"in p&&t(5,r=p.messages),"layout"in p&&t(6,a=p.layout),"render_markdown"in p&&t(7,_=p.render_markdown),"latex_delimiters"in p&&t(8,u=p.latex_delimiters),"sanitize_html"in p&&t(9,f=p.sanitize_html),"selectable"in p&&t(10,c=p.selectable),"_fetch"in p&&t(11,b=p._fetch),"rtl"in p&&t(12,m=p.rtl),"dispatch"in p&&t(13,h=p.dispatch),"i18n"in p&&t(14,w=p.i18n),"line_breaks"in p&&t(15,d=p.line_breaks),"upload"in p&&t(16,v=p.upload),"target"in p&&t(17,S=p.target),"root"in p&&t(18,$=p.root),"theme_mode"in p&&t(19,C=p.theme_mode),"_components"in p&&t(20,x=p._components),"i"in p&&t(21,ne=p.i),"show_copy_button"in p&&t(32,z=p.show_copy_button),"generating"in p&&t(33,he=p.generating),"feedback_options"in p&&t(34,j=p.feedback_options),"show_like"in p&&t(35,Le=p.show_like),"show_edit"in p&&t(36,Me=p.show_edit),"show_retry"in p&&t(37,Ne=p.show_retry),"show_undo"in p&&t(38,B=p.show_undo),"msg_format"in p&&t(39,Ve=p.msg_format),"handle_action"in p&&t(40,De=p.handle_action),"scroll"in p&&t(22,Ke=p.scroll),"allow_file_downloads"in p&&t(23,Ie=p.allow_file_downloads),"in_edit_mode"in p&&t(24,ye=p.in_edit_mode),"edit_message"in p&&t(0,de=p.edit_message),"display_consecutive_in_same_bubble"in p&&t(25,Qe=p.display_consecutive_in_same_bubble),"current_feedback"in p&&t(26,Be=p.current_feedback)},l.$$.update=()=>{l.$$.dirty[0]&150994944&&ye&&!Nr&&(t(28,Xe=ue[ue.length-1]?.clientWidth),t(29,xe=ue[ue.length-1]?.clientHeight)),l.$$.dirty[0]&83894388|l.$$.dirty[1]&1022&&t(30,ze={handle_action:De,likeable:Le,feedback_options:j,show_retry:Ne,show_undo:B,show_edit:Me,in_edit_mode:ye,generating:he,show_copy_button:z,message:Ve==="tuples"?r[0]:r,position:o==="user"?"right":"left",avatar:i,layout:a,dispatch:h,current_feedback:Be})},[de,n,i,s,o,r,a,_,u,f,c,b,m,h,w,d,v,S,$,C,x,ne,Ke,Ie,ye,Qe,Be,ue,Xe,xe,ze,Ee,z,he,j,Le,Me,Ne,B,Ve,De,Ae,W,et,G,Vt]}class Dr extends vr{constructor(e){super(),yr(this,e,Vr,Mr,Sr,{value:1,avatar_img:2,opposite_avatar_img:3,role:4,messages:5,layout:6,render_markdown:7,latex_delimiters:8,sanitize_html:9,selectable:10,_fetch:11,rtl:12,dispatch:13,i18n:14,line_breaks:15,upload:16,target:17,root:18,theme_mode:19,_components:20,i:21,show_copy_button:32,generating:33,feedback_options:34,show_like:35,show_edit:36,show_retry:37,show_undo:38,msg_format:39,handle_action:40,scroll:22,allow_file_downloads:23,in_edit_mode:24,edit_message:0,display_consecutive_in_same_bubble:25,current_feedback:26},null,[-1,-1])}get value(){return this.$$.ctx[1]}set value(e){this.$$set({value:e}),q()}get avatar_img(){return this.$$.ctx[2]}set avatar_img(e){this.$$set({avatar_img:e}),q()}get opposite_avatar_img(){return this.$$.ctx[3]}set opposite_avatar_img(e){this.$$set({opposite_avatar_img:e}),q()}get role(){return this.$$.ctx[4]}set role(e){this.$$set({role:e}),q()}get messages(){return this.$$.ctx[5]}set messages(e){this.$$set({messages:e}),q()}get layout(){return this.$$.ctx[6]}set layout(e){this.$$set({layout:e}),q()}get render_markdown(){return this.$$.ctx[7]}set render_markdown(e){this.$$set({render_markdown:e}),q()}get latex_delimiters(){return this.$$.ctx[8]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),q()}get sanitize_html(){return this.$$.ctx[9]}set sanitize_html(e){this.$$set({sanitize_html:e}),q()}get selectable(){return this.$$.ctx[10]}set selectable(e){this.$$set({selectable:e}),q()}get _fetch(){return this.$$.ctx[11]}set _fetch(e){this.$$set({_fetch:e}),q()}get rtl(){return this.$$.ctx[12]}set rtl(e){this.$$set({rtl:e}),q()}get dispatch(){return this.$$.ctx[13]}set dispatch(e){this.$$set({dispatch:e}),q()}get i18n(){return this.$$.ctx[14]}set i18n(e){this.$$set({i18n:e}),q()}get line_breaks(){return this.$$.ctx[15]}set line_breaks(e){this.$$set({line_breaks:e}),q()}get upload(){return this.$$.ctx[16]}set upload(e){this.$$set({upload:e}),q()}get target(){return this.$$.ctx[17]}set target(e){this.$$set({target:e}),q()}get root(){return this.$$.ctx[18]}set root(e){this.$$set({root:e}),q()}get theme_mode(){return this.$$.ctx[19]}set theme_mode(e){this.$$set({theme_mode:e}),q()}get _components(){return this.$$.ctx[20]}set _components(e){this.$$set({_components:e}),q()}get i(){return this.$$.ctx[21]}set i(e){this.$$set({i:e}),q()}get show_copy_button(){return this.$$.ctx[32]}set show_copy_button(e){this.$$set({show_copy_button:e}),q()}get generating(){return this.$$.ctx[33]}set generating(e){this.$$set({generating:e}),q()}get feedback_options(){return this.$$.ctx[34]}set feedback_options(e){this.$$set({feedback_options:e}),q()}get show_like(){return this.$$.ctx[35]}set show_like(e){this.$$set({show_like:e}),q()}get show_edit(){return this.$$.ctx[36]}set show_edit(e){this.$$set({show_edit:e}),q()}get show_retry(){return this.$$.ctx[37]}set show_retry(e){this.$$set({show_retry:e}),q()}get show_undo(){return this.$$.ctx[38]}set show_undo(e){this.$$set({show_undo:e}),q()}get msg_format(){return this.$$.ctx[39]}set msg_format(e){this.$$set({msg_format:e}),q()}get handle_action(){return this.$$.ctx[40]}set handle_action(e){this.$$set({handle_action:e}),q()}get scroll(){return this.$$.ctx[22]}set scroll(e){this.$$set({scroll:e}),q()}get allow_file_downloads(){return this.$$.ctx[23]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),q()}get in_edit_mode(){return this.$$.ctx[24]}set in_edit_mode(e){this.$$set({in_edit_mode:e}),q()}get edit_message(){return this.$$.ctx[0]}set edit_message(e){this.$$set({edit_message:e}),q()}get display_consecutive_in_same_bubble(){return this.$$.ctx[25]}set display_consecutive_in_same_bubble(e){this.$$set({display_consecutive_in_same_bubble:e}),q()}get current_feedback(){return this.$$.ctx[26]}set current_feedback(e){this.$$set({current_feedback:e}),q()}}const{SvelteComponent:Ir,append:Pn,attr:tt,check_outros:Br,create_component:Er,destroy_component:Ar,detach:oo,element:on,flush:ki,group_outros:Tr,init:Fr,insert:so,mount_component:Zr,safe_not_equal:Ur,space:Pr,toggle_class:nn,transition_in:sn,transition_out:Qn}=window.__gradio__svelte__internal;function pi(l){let e,t,n;return t=new Gt({props:{class:"avatar-image",src:l[1][1].url,alt:"bot avatar"}}),{c(){e=on("div"),Er(t.$$.fragment),tt(e,"class","avatar-container svelte-1u5aj92")},m(i,s){so(i,e,s),Zr(t,e,null),n=!0},p(i,s){const o={};s&2&&(o.src=i[1][1].url),t.$set(o)},i(i){n||(sn(t.$$.fragment,i),n=!0)},o(i){Qn(t.$$.fragment,i),n=!1},d(i){i&&oo(e),Ar(t)}}}function Rr(l){let e,t,n,i,s,o,r=l[1][1]!==null&&pi(l);return{c(){e=on("div"),r&&r.c(),t=Pr(),n=on("div"),i=on("div"),i.innerHTML='<span class="sr-only">Loading content</span> <div class="dots svelte-1u5aj92"><div class="dot svelte-1u5aj92"></div> <div class="dot svelte-1u5aj92"></div> <div class="dot svelte-1u5aj92"></div></div>',tt(i,"class","message-content svelte-1u5aj92"),tt(n,"class",s="message bot pending "+l[0]+" svelte-1u5aj92"),tt(n,"role","status"),tt(n,"aria-label","Loading response"),tt(n,"aria-live","polite"),nn(n,"with_avatar",l[1][1]!==null),nn(n,"with_opposite_avatar",l[1][0]!==null),tt(e,"class","container svelte-1u5aj92")},m(a,_){so(a,e,_),r&&r.m(e,null),Pn(e,t),Pn(e,n),Pn(n,i),o=!0},p(a,[_]){a[1][1]!==null?r?(r.p(a,_),_&2&&sn(r,1)):(r=pi(a),r.c(),sn(r,1),r.m(e,t)):r&&(Tr(),Qn(r,1,1,()=>{r=null}),Br()),(!o||_&1&&s!==(s="message bot pending "+a[0]+" svelte-1u5aj92"))&&tt(n,"class",s),(!o||_&3)&&nn(n,"with_avatar",a[1][1]!==null),(!o||_&3)&&nn(n,"with_opposite_avatar",a[1][0]!==null)},i(a){o||(sn(r),o=!0)},o(a){Qn(r),o=!1},d(a){a&&oo(e),r&&r.d()}}}function Or(l,e,t){let{layout:n="bubble"}=e,{avatar_images:i=[null,null]}=e;return l.$$set=s=>{"layout"in s&&t(0,n=s.layout),"avatar_images"in s&&t(1,i=s.avatar_images)},[n,i]}class Jr extends Ir{constructor(e){super(),Fr(this,e,Or,Rr,Ur,{layout:0,avatar_images:1})}get layout(){return this.$$.ctx[0]}set layout(e){this.$$set({layout:e}),ki()}get avatar_images(){return this.$$.ctx[1]}set avatar_images(e){this.$$set({avatar_images:e}),ki()}}const{SvelteComponent:Wr,append:U,attr:y,check_outros:at,create_component:ft,destroy_component:ct,destroy_each:ao,detach:P,element:A,empty:ro,ensure_array_like:mn,flush:ln,group_outros:rt,init:Gr,insert:R,listen:Yr,mount_component:mt,noop:Ht,safe_not_equal:Kr,set_data:wn,space:Zt,src_url_equal:hn,text:Mt,transition_in:N,transition_out:E}=window.__gradio__svelte__internal,{createEventDispatcher:Qr}=window.__gradio__svelte__internal;function vi(l,e,t){const n=l.slice();return n[7]=e[t],n[9]=t,n}function $i(l,e,t){const n=l.slice();return n[10]=e[t],n[9]=t,n}function Ci(l){let e,t,n;return t=new el({props:{message:l[1],latex_delimiters:l[2],root:l[3]}}),{c(){e=A("div"),ft(t.$$.fragment),y(e,"class","placeholder svelte-9pi8y1")},m(i,s){R(i,e,s),mt(t,e,null),n=!0},p(i,s){const o={};s&2&&(o.message=i[1]),s&4&&(o.latex_delimiters=i[2]),s&8&&(o.root=i[3]),t.$set(o)},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){i&&P(e),ct(t)}}}function yi(l){let e,t,n=mn(l[0]),i=[];for(let o=0;o<n.length;o+=1)i[o]=qi(vi(l,n,o));const s=o=>E(i[o],1,1,()=>{i[o]=null});return{c(){e=A("div");for(let o=0;o<i.length;o+=1)i[o].c();y(e,"class","examples svelte-9pi8y1"),y(e,"role","list")},m(o,r){R(o,e,r);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);t=!0},p(o,r){if(r&17){n=mn(o[0]);let a;for(a=0;a<n.length;a+=1){const _=vi(o,n,a);i[a]?(i[a].p(_,r),N(i[a],1)):(i[a]=qi(_),i[a].c(),N(i[a],1),i[a].m(e,null))}for(rt(),a=n.length;a<i.length;a+=1)s(a);at()}},i(o){if(!t){for(let r=0;r<n.length;r+=1)N(i[r]);t=!0}},o(o){i=i.filter(Boolean);for(let r=0;r<i.length;r+=1)E(i[r]);t=!1},d(o){o&&P(e),ao(i,o)}}}function Xr(l){let e,t,n,i,s,o,r;const a=[o_,i_,l_,n_,t_],_=[];function u(f,c){return c&1&&(e=null),c&1&&(t=null),c&1&&(n=null),f[7].files.length>1?0:(e==null&&(e=!!f[7].files[0].mime_type?.includes("image")),e?1:(t==null&&(t=!!f[7].files[0].mime_type?.includes("video")),t?2:(n==null&&(n=!!f[7].files[0].mime_type?.includes("audio")),n?3:4)))}return i=u(l,-1),s=_[i]=a[i](l),{c(){s.c(),o=ro()},m(f,c){_[i].m(f,c),R(f,o,c),r=!0},p(f,c){let b=i;i=u(f,c),i===b?_[i].p(f,c):(rt(),E(_[b],1,1,()=>{_[b]=null}),at(),s=_[i],s?s.p(f,c):(s=_[i]=a[i](f),s.c()),N(s,1),s.m(o.parentNode,o))},i(f){r||(N(s),r=!0)},o(f){E(s),r=!1},d(f){f&&P(o),_[i].d(f)}}}function xr(l){let e;return{c(){e=A("div"),e.innerHTML='<span class="text-icon-aa svelte-9pi8y1">Aa</span>',y(e,"class","example-icon svelte-9pi8y1"),y(e,"aria-hidden","true")},m(t,n){R(t,e,n)},p:Ht,i:Ht,o:Ht,d(t){t&&P(e)}}}function e_(l){let e,t,n;return t=new Gt({props:{class:"example-image",src:l[7].icon.url,alt:"Example icon"}}),{c(){e=A("div"),ft(t.$$.fragment),y(e,"class","example-image-container svelte-9pi8y1")},m(i,s){R(i,e,s),mt(t,e,null),n=!0},p(i,s){const o={};s&1&&(o.src=i[7].icon.url),t.$set(o)},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){i&&P(e),ct(t)}}}function t_(l){let e,t,n,i;return t=new xn({}),{c(){e=A("div"),ft(t.$$.fragment),y(e,"class","example-icon svelte-9pi8y1"),y(e,"aria-label",n=`File: ${l[7].files[0].orig_name}`)},m(s,o){R(s,e,o),mt(t,e,null),i=!0},p(s,o){(!i||o&1&&n!==(n=`File: ${s[7].files[0].orig_name}`))&&y(e,"aria-label",n)},i(s){i||(N(t.$$.fragment,s),i=!0)},o(s){E(t.$$.fragment,s),i=!1},d(s){s&&P(e),ct(t)}}}function n_(l){let e,t,n,i;return t=new Wi({}),{c(){e=A("div"),ft(t.$$.fragment),y(e,"class","example-icon svelte-9pi8y1"),y(e,"aria-label",n=`File: ${l[7].files[0].orig_name}`)},m(s,o){R(s,e,o),mt(t,e,null),i=!0},p(s,o){(!i||o&1&&n!==(n=`File: ${s[7].files[0].orig_name}`))&&y(e,"aria-label",n)},i(s){i||(N(t.$$.fragment,s),i=!0)},o(s){E(t.$$.fragment,s),i=!1},d(s){s&&P(e),ct(t)}}}function l_(l){let e,t,n;return{c(){e=A("div"),t=A("video"),y(t,"class","example-image"),hn(t.src,n=l[7].files[0].url)||y(t,"src",n),y(t,"aria-hidden","true"),y(e,"class","example-image-container svelte-9pi8y1")},m(i,s){R(i,e,s),U(e,t)},p(i,s){s&1&&!hn(t.src,n=i[7].files[0].url)&&y(t,"src",n)},i:Ht,o:Ht,d(i){i&&P(e)}}}function i_(l){let e,t,n;return t=new Gt({props:{class:"example-image",src:l[7].files[0].url,alt:l[7].files[0].orig_name||"Example image"}}),{c(){e=A("div"),ft(t.$$.fragment),y(e,"class","example-image-container svelte-9pi8y1")},m(i,s){R(i,e,s),mt(t,e,null),n=!0},p(i,s){const o={};s&1&&(o.src=i[7].files[0].url),s&1&&(o.alt=i[7].files[0].orig_name||"Example image"),t.$set(o)},i(i){n||(N(t.$$.fragment,i),n=!0)},o(i){E(t.$$.fragment,i),n=!1},d(i){i&&P(e),ct(t)}}}function o_(l){let e,t,n,i=mn(l[7].files.slice(0,4)),s=[];for(let a=0;a<i.length;a+=1)s[a]=ji($i(l,i,a));const o=a=>E(s[a],1,1,()=>{s[a]=null});let r=l[7].files.length>4&&Hi(l);return{c(){e=A("div");for(let a=0;a<s.length;a+=1)s[a].c();t=Zt(),r&&r.c(),y(e,"class","example-icons-grid svelte-9pi8y1"),y(e,"role","group"),y(e,"aria-label","Example attachments")},m(a,_){R(a,e,_);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);U(e,t),r&&r.m(e,null),n=!0},p(a,_){if(_&1){i=mn(a[7].files.slice(0,4));let u;for(u=0;u<i.length;u+=1){const f=$i(a,i,u);s[u]?(s[u].p(f,_),N(s[u],1)):(s[u]=ji(f),s[u].c(),N(s[u],1),s[u].m(e,t))}for(rt(),u=i.length;u<s.length;u+=1)o(u);at()}a[7].files.length>4?r?r.p(a,_):(r=Hi(a),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i(a){if(!n){for(let _=0;_<i.length;_+=1)N(s[_]);n=!0}},o(a){s=s.filter(Boolean);for(let _=0;_<s.length;_+=1)E(s[_]);n=!1},d(a){a&&P(e),ao(s,a),r&&r.d()}}}function s_(l){let e,t,n,i,s,o;const r=[u_,__],a=[];function _(u,f){return f&1&&(t=null),t==null&&(t=!!u[10].mime_type?.includes("audio")),t?0:1}return n=_(l,-1),i=a[n]=r[n](l),{c(){e=A("div"),i.c(),y(e,"class","example-icon svelte-9pi8y1"),y(e,"aria-label",s=`File: ${l[10].orig_name}`)},m(u,f){R(u,e,f),a[n].m(e,null),o=!0},p(u,f){let c=n;n=_(u,f),n!==c&&(rt(),E(a[c],1,1,()=>{a[c]=null}),at(),i=a[n],i||(i=a[n]=r[n](u),i.c()),N(i,1),i.m(e,null)),(!o||f&1&&s!==(s=`File: ${u[10].orig_name}`))&&y(e,"aria-label",s)},i(u){o||(N(i),o=!0)},o(u){E(i),o=!1},d(u){u&&P(e),a[n].d()}}}function a_(l){let e,t,n,i,s=l[9]===3&&l[7].files.length>4&&zi(l);return{c(){e=A("div"),t=A("video"),i=Zt(),s&&s.c(),y(t,"class","example-image"),hn(t.src,n=l[10].url)||y(t,"src",n),y(t,"aria-hidden","true"),y(e,"class","example-image-container svelte-9pi8y1")},m(o,r){R(o,e,r),U(e,t),U(e,i),s&&s.m(e,null)},p(o,r){r&1&&!hn(t.src,n=o[10].url)&&y(t,"src",n),o[9]===3&&o[7].files.length>4?s?s.p(o,r):(s=zi(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i:Ht,o:Ht,d(o){o&&P(e),s&&s.d()}}}function r_(l){let e,t,n,i;t=new Gt({props:{class:"example-image",src:l[10].url,alt:l[10].orig_name||`Example image ${l[9]+1}`}});let s=l[9]===3&&l[7].files.length>4&&Si(l);return{c(){e=A("div"),ft(t.$$.fragment),n=Zt(),s&&s.c(),y(e,"class","example-image-container svelte-9pi8y1")},m(o,r){R(o,e,r),mt(t,e,null),U(e,n),s&&s.m(e,null),i=!0},p(o,r){const a={};r&1&&(a.src=o[10].url),r&1&&(a.alt=o[10].orig_name||`Example image ${o[9]+1}`),t.$set(a),o[9]===3&&o[7].files.length>4?s?s.p(o,r):(s=Si(o),s.c(),s.m(e,null)):s&&(s.d(1),s=null)},i(o){i||(N(t.$$.fragment,o),i=!0)},o(o){E(t.$$.fragment,o),i=!1},d(o){o&&P(e),ct(t),s&&s.d()}}}function __(l){let e,t;return e=new xn({}),{c(){ft(e.$$.fragment)},m(n,i){mt(e,n,i),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){ct(e,n)}}}function u_(l){let e,t;return e=new Wi({}),{c(){ft(e.$$.fragment)},m(n,i){mt(e,n,i),t=!0},i(n){t||(N(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){ct(e,n)}}}function zi(l){let e,t,n=l[7].files.length-4+"",i,s;return{c(){e=A("div"),t=Mt("+"),i=Mt(n),y(e,"class","image-overlay svelte-9pi8y1"),y(e,"role","status"),y(e,"aria-label",s=`${l[7].files.length-4} more files`)},m(o,r){R(o,e,r),U(e,t),U(e,i)},p(o,r){r&1&&n!==(n=o[7].files.length-4+"")&&wn(i,n),r&1&&s!==(s=`${o[7].files.length-4} more files`)&&y(e,"aria-label",s)},d(o){o&&P(e)}}}function Si(l){let e,t,n=l[7].files.length-4+"",i,s;return{c(){e=A("div"),t=Mt("+"),i=Mt(n),y(e,"class","image-overlay svelte-9pi8y1"),y(e,"role","status"),y(e,"aria-label",s=`${l[7].files.length-4} more files`)},m(o,r){R(o,e,r),U(e,t),U(e,i)},p(o,r){r&1&&n!==(n=o[7].files.length-4+"")&&wn(i,n),r&1&&s!==(s=`${o[7].files.length-4} more files`)&&y(e,"aria-label",s)},d(o){o&&P(e)}}}function ji(l){let e,t,n,i,s,o;const r=[r_,a_,s_],a=[];function _(u,f){return f&1&&(e=null),f&1&&(t=null),e==null&&(e=!!u[10].mime_type?.includes("image")),e?0:(t==null&&(t=!!u[10].mime_type?.includes("video")),t?1:2)}return n=_(l,-1),i=a[n]=r[n](l),{c(){i.c(),s=ro()},m(u,f){a[n].m(u,f),R(u,s,f),o=!0},p(u,f){let c=n;n=_(u,f),n===c?a[n].p(u,f):(rt(),E(a[c],1,1,()=>{a[c]=null}),at(),i=a[n],i?i.p(u,f):(i=a[n]=r[n](u),i.c()),N(i,1),i.m(s.parentNode,s))},i(u){o||(N(i),o=!0)},o(u){E(i),o=!1},d(u){u&&P(s),a[n].d(u)}}}function Hi(l){let e,t,n,i=l[7].files.length-4+"",s,o;return{c(){e=A("div"),t=A("div"),n=Mt("+"),s=Mt(i),y(t,"class","file-overlay svelte-9pi8y1"),y(t,"role","status"),y(t,"aria-label",o=`${l[7].files.length-4} more files`),y(e,"class","example-icon svelte-9pi8y1")},m(r,a){R(r,e,a),U(e,t),U(t,n),U(t,s)},p(r,a){a&1&&i!==(i=r[7].files.length-4+"")&&wn(s,i),a&1&&o!==(o=`${r[7].files.length-4} more files`)&&y(t,"aria-label",o)},d(r){r&&P(e)}}}function qi(l){let e,t,n,i,s,o,r,a=(l[7].display_text||l[7].text)+"",_,u,f,c,b,m;const h=[e_,xr,Xr],w=[];function d(S,$){return S[7]?.icon?.url?0:S[7]?.icon?.mime_type==="text"?1:S[7].files!==void 0&&S[7].files.length>0?2:-1}~(n=d(l))&&(i=w[n]=h[n](l));function v(){return l[5](l[9],l[7])}return{c(){e=A("button"),t=A("div"),i&&i.c(),s=Zt(),o=A("div"),r=A("span"),_=Mt(a),u=Zt(),y(r,"class","example-text svelte-9pi8y1"),y(o,"class","example-text-content svelte-9pi8y1"),y(t,"class","example-content svelte-9pi8y1"),y(e,"class","example svelte-9pi8y1"),y(e,"aria-label",f=`Select example ${l[9]+1}: ${l[7].display_text||l[7].text}`)},m(S,$){R(S,e,$),U(e,t),~n&&w[n].m(t,null),U(t,s),U(t,o),U(o,r),U(r,_),U(e,u),c=!0,b||(m=Yr(e,"click",v),b=!0)},p(S,$){l=S;let C=n;n=d(l),n===C?~n&&w[n].p(l,$):(i&&(rt(),E(w[C],1,1,()=>{w[C]=null}),at()),~n?(i=w[n],i?i.p(l,$):(i=w[n]=h[n](l),i.c()),N(i,1),i.m(t,s)):i=null),(!c||$&1)&&a!==(a=(l[7].display_text||l[7].text)+"")&&wn(_,a),(!c||$&1&&f!==(f=`Select example ${l[9]+1}: ${l[7].display_text||l[7].text}`))&&y(e,"aria-label",f)},i(S){c||(N(i),c=!0)},o(S){E(i),c=!1},d(S){S&&P(e),~n&&w[n].d(),b=!1,m()}}}function f_(l){let e,t,n,i=l[1]!==null&&Ci(l),s=l[0]!==null&&yi(l);return{c(){e=A("div"),i&&i.c(),t=Zt(),s&&s.c(),y(e,"class","placeholder-content svelte-9pi8y1"),y(e,"role","complementary")},m(o,r){R(o,e,r),i&&i.m(e,null),U(e,t),s&&s.m(e,null),n=!0},p(o,[r]){o[1]!==null?i?(i.p(o,r),r&2&&N(i,1)):(i=Ci(o),i.c(),N(i,1),i.m(e,t)):i&&(rt(),E(i,1,1,()=>{i=null}),at()),o[0]!==null?s?(s.p(o,r),r&1&&N(s,1)):(s=yi(o),s.c(),N(s,1),s.m(e,null)):s&&(rt(),E(s,1,1,()=>{s=null}),at())},i(o){n||(N(i),N(s),n=!0)},o(o){E(i),E(s),n=!1},d(o){o&&P(e),i&&i.d(),s&&s.d()}}}function c_(l,e,t){let{examples:n=null}=e,{placeholder:i=null}=e,{latex_delimiters:s}=e,{root:o}=e;const r=Qr();function a(u,f){const c=typeof f=="string"?{text:f}:f;r("example_select",{index:u,value:{text:c.text,files:c.files}})}const _=(u,f)=>a(u,typeof f=="string"?{text:f}:f);return l.$$set=u=>{"examples"in u&&t(0,n=u.examples),"placeholder"in u&&t(1,i=u.placeholder),"latex_delimiters"in u&&t(2,s=u.latex_delimiters),"root"in u&&t(3,o=u.root)},[n,i,s,o,a,_]}class m_ extends Wr{constructor(e){super(),Gr(this,e,c_,f_,Kr,{examples:0,placeholder:1,latex_delimiters:2,root:3})}get examples(){return this.$$.ctx[0]}set examples(e){this.$$set({examples:e}),ln()}get placeholder(){return this.$$.ctx[1]}set placeholder(e){this.$$set({placeholder:e}),ln()}get latex_delimiters(){return this.$$.ctx[2]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),ln()}get root(){return this.$$.ctx[3]}set root(e){this.$$set({root:e}),ln()}}const{SvelteComponent:h_,create_component:d_,destroy_component:g_,flush:b_,init:w_,mount_component:k_,safe_not_equal:p_,transition_in:v_,transition_out:$_}=window.__gradio__svelte__internal,{onDestroy:C_}=window.__gradio__svelte__internal;function y_(l){let e,t;return e=new le({props:{Icon:l[0]?Ot:an,label:l[0]?"Copied conversation":"Copy conversation"}}),e.$on("click",l[1]),{c(){d_(e.$$.fragment)},m(n,i){k_(e,n,i),t=!0},p(n,[i]){const s={};i&1&&(s.Icon=n[0]?Ot:an),i&1&&(s.label=n[0]?"Copied conversation":"Copy conversation"),e.$set(s)},i(n){t||(v_(e.$$.fragment,n),t=!0)},o(n){$_(e.$$.fragment,n),t=!1},d(n){g_(e,n)}}}function z_(l,e,t){let n=!1,{value:i}=e,s;function o(){t(0,n=!0),s&&clearTimeout(s),s=setTimeout(()=>{t(0,n=!1)},1e3)}const r=()=>{if(i){const _=i.map(u=>u.type==="text"?`${u.role}: ${u.content}`:`${u.role}: ${u.content.value.url}`).join(`

`);navigator.clipboard.writeText(_).catch(u=>{console.error("Failed to copy conversation: ",u)})}};async function a(){"clipboard"in navigator&&(r(),o())}return C_(()=>{s&&clearTimeout(s)}),l.$$set=_=>{"value"in _&&t(2,i=_.value)},[n,a,i]}class S_ extends h_{constructor(e){super(),w_(this,e,z_,y_,p_,{value:2})}get value(){return this.$$.ctx[2]}set value(e){this.$$set({value:e}),b_()}}const{SvelteComponent:j_,action_destroyer:H_,add_flush_callback:q_,append:Xn,attr:Re,bind:L_,binding_callbacks:_o,check_outros:qt,create_component:ht,destroy_component:dt,destroy_each:uo,detach:$e,element:Xt,empty:fo,ensure_array_like:dn,flush:L,group_outros:Lt,init:M_,insert:Ce,listen:N_,mount_component:gt,noop:gn,null_to_empty:Li,safe_not_equal:V_,set_data:D_,space:Ut,text:I_,transition_in:D,transition_out:F}=window.__gradio__svelte__internal,{createEventDispatcher:B_,tick:E_,onMount:Rn}=window.__gradio__svelte__internal;function Mi(l,e,t){const n=l.slice();return n[59]=e[t],n[61]=t,n}function Ni(l,e,t){const n=l.slice();n[62]=e[t],n[69]=t;const i=n[62][0].role==="user"?"user":"bot";n[63]=i;const s=n[16][n[63]==="user"?0:1];n[64]=s;const o=n[16][n[63]==="user"?0:1];n[65]=o;const r=n[37].slice(0,n[69]).filter(_=>_[0].role==="assistant").length;n[66]=r;const a=n[63]==="bot"&&n[10]&&n[10][n[66]]?n[10][n[66]]:null;return n[67]=a,n}function Vi(l){let e,t;return e=new Ji({props:{$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){ht(e.$$.fragment)},m(n,i){gt(e,n,i),t=!0},p(n,i){const s={};i[0]&12289|i[2]&256&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function Di(l){let e,t;return e=new le({props:{Icon:$o}}),e.$on("click",l[46]),{c(){ht(e.$$.fragment)},m(n,i){gt(e,n,i),t=!0},p:gn,i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function Ii(l){let e,t;return e=new S_({props:{value:l[0]}}),{c(){ht(e.$$.fragment)},m(n,i){gt(e,n,i),t=!0},p(n,i){const s={};i[0]&1&&(s.value=n[0]),e.$set(s)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function A_(l){let e,t,n,i,s,o=l[12]&&Di(l);t=new le({props:{Icon:Co,label:"Clear"}}),t.$on("click",l[47]);let r=l[13]&&Ii(l);return{c(){o&&o.c(),e=Ut(),ht(t.$$.fragment),n=Ut(),r&&r.c(),i=fo()},m(a,_){o&&o.m(a,_),Ce(a,e,_),gt(t,a,_),Ce(a,n,_),r&&r.m(a,_),Ce(a,i,_),s=!0},p(a,_){a[12]?o?(o.p(a,_),_[0]&4096&&D(o,1)):(o=Di(a),o.c(),D(o,1),o.m(e.parentNode,e)):o&&(Lt(),F(o,1,1,()=>{o=null}),qt()),a[13]?r?(r.p(a,_),_[0]&8192&&D(r,1)):(r=Ii(a),r.c(),D(r,1),r.m(i.parentNode,i)):r&&(Lt(),F(r,1,1,()=>{r=null}),qt())},i(a){s||(D(o),D(t.$$.fragment,a),D(r),s=!0)},o(a){F(o),F(t.$$.fragment,a),F(r),s=!1},d(a){a&&($e(e),$e(n),$e(i)),o&&o.d(a),dt(t,a),r&&r.d(a)}}}function T_(l){let e,t;return e=new m_({props:{examples:l[26],placeholder:l[23],latex_delimiters:l[4],root:l[30]}}),e.$on("example_select",l[52]),{c(){ht(e.$$.fragment)},m(n,i){gt(e,n,i),t=!0},p(n,i){const s={};i[0]&67108864&&(s.examples=n[26]),i[0]&8388608&&(s.placeholder=n[23]),i[0]&16&&(s.latex_delimiters=n[4]),i[0]&1073741824&&(s.root=n[30]),e.$set(s)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function F_(l){let e,t,n,i,s,o,r,a=dn(l[37]),_=[];for(let m=0;m<a.length;m+=1)_[m]=Bi(Ni(l,a,m));const u=m=>F(_[m],1,1,()=>{_[m]=null}),f=[U_,Z_],c=[];function b(m,h){return m[5]?0:m[38]?1:-1}return~(n=b(l))&&(i=c[n]=f[n](l)),{c(){e=Xt("div");for(let m=0;m<_.length;m+=1)_[m].c();t=Ut(),i&&i.c(),Re(e,"class","message-wrap svelte-gjtrl6")},m(m,h){Ce(m,e,h);for(let w=0;w<_.length;w+=1)_[w]&&_[w].m(e,null);Xn(e,t),~n&&c[n].m(e,null),s=!0,o||(r=H_(bo.call(null,e)),o=!0)},p(m,h){if(h[0]&2071973855|h[1]&2895){a=dn(m[37]);let d;for(d=0;d<a.length;d+=1){const v=Ni(m,a,d);_[d]?(_[d].p(v,h),D(_[d],1)):(_[d]=Bi(v),_[d].c(),D(_[d],1),_[d].m(e,t))}for(Lt(),d=a.length;d<_.length;d+=1)u(d);qt()}let w=n;n=b(m),n===w?~n&&c[n].p(m,h):(i&&(Lt(),F(c[w],1,1,()=>{c[w]=null}),qt()),~n?(i=c[n],i?i.p(m,h):(i=c[n]=f[n](m),i.c()),D(i,1),i.m(e,null)):i=null)},i(m){if(!s){for(let h=0;h<a.length;h+=1)D(_[h]);D(i),s=!0}},o(m){_=_.filter(Boolean);for(let h=0;h<_.length;h+=1)F(_[h]);F(i),s=!1},d(m){m&&$e(e),uo(_,m),~n&&c[n].d(),o=!1,r()}}}function Bi(l){let e,t,n;function i(...r){return l[48](l[69],l[62],...r)}function s(r){l[49](r)}let o={messages:l[62],display_consecutive_in_same_bubble:l[3],opposite_avatar_img:l[65],avatar_img:l[64],role:l[63],layout:l[22],dispatch:l[40],i18n:l[21],_fetch:l[1],line_breaks:l[19],theme_mode:l[20],target:l[32],root:l[30],upload:l[24],selectable:l[7],sanitize_html:l[17],render_markdown:l[18],rtl:l[14],i:l[69],value:l[0],latex_delimiters:l[4],_components:l[31],generating:l[6],msg_format:l[25],feedback_options:l[9],current_feedback:l[67],show_like:l[63]==="user"?l[8]&&l[29]:l[8],show_retry:l[27]&&tn(l[62],l[0]),show_undo:l[28]&&tn(l[62],l[0]),show_edit:l[11]==="all"||l[11]=="user"&&l[63]==="user"&&l[62].length>0&&l[62][l[62].length-1].type=="text",in_edit_mode:l[33]===l[69],show_copy_button:l[15],handle_action:i,scroll:l[39]?scroll:R_,allow_file_downloads:l[2]};return l[34]!==void 0&&(o.edit_message=l[34]),e=new Dr({props:o}),_o.push(()=>L_(e,"edit_message",s)),e.$on("copy",l[50]),{c(){ht(e.$$.fragment)},m(r,a){gt(e,r,a),n=!0},p(r,a){l=r;const _={};a[1]&64&&(_.messages=l[62]),a[0]&8&&(_.display_consecutive_in_same_bubble=l[3]),a[0]&65536|a[1]&64&&(_.opposite_avatar_img=l[65]),a[0]&65536|a[1]&64&&(_.avatar_img=l[64]),a[1]&64&&(_.role=l[63]),a[0]&4194304&&(_.layout=l[22]),a[0]&2097152&&(_.i18n=l[21]),a[0]&2&&(_._fetch=l[1]),a[0]&524288&&(_.line_breaks=l[19]),a[0]&1048576&&(_.theme_mode=l[20]),a[1]&2&&(_.target=l[32]),a[0]&1073741824&&(_.root=l[30]),a[0]&16777216&&(_.upload=l[24]),a[0]&128&&(_.selectable=l[7]),a[0]&131072&&(_.sanitize_html=l[17]),a[0]&262144&&(_.render_markdown=l[18]),a[0]&16384&&(_.rtl=l[14]),a[0]&1&&(_.value=l[0]),a[0]&16&&(_.latex_delimiters=l[4]),a[1]&1&&(_._components=l[31]),a[0]&64&&(_.generating=l[6]),a[0]&33554432&&(_.msg_format=l[25]),a[0]&512&&(_.feedback_options=l[9]),a[0]&1024|a[1]&64&&(_.current_feedback=l[67]),a[0]&536871168|a[1]&64&&(_.show_like=l[63]==="user"?l[8]&&l[29]:l[8]),a[0]&134217729|a[1]&64&&(_.show_retry=l[27]&&tn(l[62],l[0])),a[0]&268435457|a[1]&64&&(_.show_undo=l[28]&&tn(l[62],l[0])),a[0]&2048|a[1]&64&&(_.show_edit=l[11]==="all"||l[11]=="user"&&l[63]==="user"&&l[62].length>0&&l[62][l[62].length-1].type=="text"),a[1]&4&&(_.in_edit_mode=l[33]===l[69]),a[0]&32768&&(_.show_copy_button=l[15]),a[1]&64&&(_.handle_action=i),a[0]&4&&(_.allow_file_downloads=l[2]),!t&&a[1]&8&&(t=!0,_.edit_message=l[34],q_(()=>t=!1)),e.$set(_)},i(r){n||(D(e.$$.fragment,r),n=!0)},o(r){F(e.$$.fragment,r),n=!1},d(r){dt(e,r)}}}function Z_(l){let e,t=dn(l[38]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Ei(Mi(l,t,i));return{c(){e=Xt("div");for(let i=0;i<n.length;i+=1)n[i].c();Re(e,"class","options svelte-gjtrl6")},m(i,s){Ce(i,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,s){if(s[1]&640){t=dn(i[38]);let o;for(o=0;o<t.length;o+=1){const r=Mi(i,t,o);n[o]?n[o].p(r,s):(n[o]=Ei(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:gn,o:gn,d(i){i&&$e(e),uo(n,i)}}}function U_(l){let e,t;return e=new Jr({props:{layout:l[22],avatar_images:l[16]}}),{c(){ht(e.$$.fragment)},m(n,i){gt(e,n,i),t=!0},p(n,i){const s={};i[0]&4194304&&(s.layout=n[22]),i[0]&65536&&(s.avatar_images=n[16]),e.$set(s)},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){F(e.$$.fragment,n),t=!1},d(n){dt(e,n)}}}function Ei(l){let e,t=(l[59].label||l[59].value)+"",n,i,s,o;function r(){return l[51](l[61],l[59])}return{c(){e=Xt("button"),n=I_(t),i=Ut(),Re(e,"class","option svelte-gjtrl6")},m(a,_){Ce(a,e,_),Xn(e,n),Xn(e,i),s||(o=N_(e,"click",r),s=!0)},p(a,_){l=a,_[1]&128&&t!==(t=(l[59].label||l[59].value)+"")&&D_(n,t)},d(a){a&&$e(e),s=!1,o()}}}function Ai(l){let e,t,n;return t=new le({props:{Icon:ts,label:"Scroll down",size:"large"}}),t.$on("click",l[41]),{c(){e=Xt("div"),ht(t.$$.fragment),Re(e,"class","scroll-down-button-container svelte-gjtrl6")},m(i,s){Ce(i,e,s),gt(t,e,null),n=!0},p:gn,i(i){n||(D(t.$$.fragment,i),n=!0)},o(i){F(t.$$.fragment,i),n=!1},d(i){i&&$e(e),dt(t)}}}function P_(l){let e,t,n,i,s,o,r,a,_=l[0]!==null&&l[0].length>0&&Vi(l);const u=[F_,T_],f=[];function c(m,h){return m[0]!==null&&m[0].length>0&&m[37]!==null?0:1}n=c(l),i=f[n]=u[n](l);let b=l[36]&&Ai(l);return{c(){_&&_.c(),e=Ut(),t=Xt("div"),i.c(),o=Ut(),b&&b.c(),r=fo(),Re(t,"class",s=Li(l[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"),Re(t,"role","log"),Re(t,"aria-label","chatbot conversation"),Re(t,"aria-live","polite")},m(m,h){_&&_.m(m,h),Ce(m,e,h),Ce(m,t,h),f[n].m(t,null),l[53](t),Ce(m,o,h),b&&b.m(m,h),Ce(m,r,h),a=!0},p(m,h){m[0]!==null&&m[0].length>0?_?(_.p(m,h),h[0]&1&&D(_,1)):(_=Vi(m),_.c(),D(_,1),_.m(e.parentNode,e)):_&&(Lt(),F(_,1,1,()=>{_=null}),qt());let w=n;n=c(m),n===w?f[n].p(m,h):(Lt(),F(f[w],1,1,()=>{f[w]=null}),qt(),i=f[n],i?i.p(m,h):(i=f[n]=u[n](m),i.c()),D(i,1),i.m(t,null)),(!a||h[0]&4194304&&s!==(s=Li(m[22]==="bubble"?"bubble-wrap":"panel-wrap")+" svelte-gjtrl6"))&&Re(t,"class",s),m[36]?b?(b.p(m,h),h[1]&32&&D(b,1)):(b=Ai(m),b.c(),D(b,1),b.m(r.parentNode,r)):b&&(Lt(),F(b,1,1,()=>{b=null}),qt())},i(m){a||(D(_),D(i),D(b),a=!0)},o(m){F(_),F(i),F(b),a=!1},d(m){m&&($e(e),$e(t),$e(o),$e(r)),_&&_.d(m),f[n].d(),l[53](null),b&&b.d(m)}}}const R_=()=>{};function O_(l,e,t){let n,i,{value:s=[]}=e,o=null,{_fetch:r}=e,{load_component:a}=e,{allow_file_downloads:_}=e,{display_consecutive_in_same_bubble:u}=e,f={};const c=typeof window<"u";async function b(){t(31,f=await as(rs(s),f,a))}let{latex_delimiters:m}=e,{pending_message:h=!1}=e,{generating:w=!1}=e,{selectable:d=!1}=e,{likeable:v=!1}=e,{feedback_options:S}=e,{feedback_value:$=null}=e,{editable:C=null}=e,{show_share_button:x=!1}=e,{show_copy_all_button:ne=!1}=e,{rtl:z=!1}=e,{show_copy_button:he=!1}=e,{avatar_images:j=[null,null]}=e,{sanitize_html:Le=!0}=e,{render_markdown:Me=!0}=e,{line_breaks:Ne=!0}=e,{autoscroll:B=!0}=e,{theme_mode:Ve}=e,{i18n:De}=e,{layout:Ke="bubble"}=e,{placeholder:Ie=null}=e,{upload:ye}=e,{msg_format:de="tuples"}=e,{examples:Qe=null}=e,{_retryable:Be=!1}=e,{_undoable:ue=!1}=e,{like_user_message:Xe=!1}=e,{root:xe}=e,Ee=null,ze=null,Ae="";Rn(()=>{t(32,Ee=document.querySelector("div.gradio-container"))});let W,et=!1;const G=B_();function Vt(){return W&&W.offsetHeight+W.scrollTop>W.scrollHeight-100}function p(){W&&(W.scrollTo(0,W.scrollHeight),t(36,et=!1))}async function ge(){B&&(Vt()?(await E_(),p()):t(36,et=!0))}Rn(()=>{ge()}),Rn(()=>{function k(){Vt()&&t(36,et=!1)}return W?.addEventListener("scroll",k),()=>{W?.removeEventListener("scroll",k)}});function xt(k,be,we){if(we==="undo"||we==="retry"){const bt=s;let Te=bt.length-1;for(;bt[Te].role==="assistant";)Te--;G(we,{index:bt[Te].index,value:bt[Te].content})}else if(we=="edit")t(33,ze=k),t(34,Ae=be.content);else if(we=="edit_cancel")t(33,ze=null);else if(we=="edit_submit")t(33,ze=null),G("edit",{index:be.index,value:Ae,previous_value:be.content});else{let bt=we==="Like"?!0:we==="Dislike"?!1:we||"";if(de==="tuples")G("like",{index:be.index,value:be.content,liked:bt});else{if(!n)return;const Te=n[k],[mo,su]=[Te[0],Te[Te.length-1]];G("like",{index:mo.index,value:Te.map(ho=>ho.content),liked:bt})}}}function $n(){if(!s||!n||n.length===0)return;const k=n[n.length-1];if(k[0].role==="assistant")return k[k.length-1].options}const Cn=async()=>{try{const k=await ns(s);G("share",{description:k})}catch(k){console.error(k);let be=k instanceof go?k.message:"Share failed.";G("error",be)}},yn=()=>G("clear"),zn=(k,be,we)=>xt(k,be[0],we);function Sn(k){Ae=k,t(34,Ae)}const jn=k=>G("copy",k.detail),Hn=(k,be)=>G("option_select",{index:k,value:be.value}),g=k=>G("example_select",k.detail);function co(k){_o[k?"unshift":"push"](()=>{W=k,t(35,W)})}return l.$$set=k=>{"value"in k&&t(0,s=k.value),"_fetch"in k&&t(1,r=k._fetch),"load_component"in k&&t(43,a=k.load_component),"allow_file_downloads"in k&&t(2,_=k.allow_file_downloads),"display_consecutive_in_same_bubble"in k&&t(3,u=k.display_consecutive_in_same_bubble),"latex_delimiters"in k&&t(4,m=k.latex_delimiters),"pending_message"in k&&t(5,h=k.pending_message),"generating"in k&&t(6,w=k.generating),"selectable"in k&&t(7,d=k.selectable),"likeable"in k&&t(8,v=k.likeable),"feedback_options"in k&&t(9,S=k.feedback_options),"feedback_value"in k&&t(10,$=k.feedback_value),"editable"in k&&t(11,C=k.editable),"show_share_button"in k&&t(12,x=k.show_share_button),"show_copy_all_button"in k&&t(13,ne=k.show_copy_all_button),"rtl"in k&&t(14,z=k.rtl),"show_copy_button"in k&&t(15,he=k.show_copy_button),"avatar_images"in k&&t(16,j=k.avatar_images),"sanitize_html"in k&&t(17,Le=k.sanitize_html),"render_markdown"in k&&t(18,Me=k.render_markdown),"line_breaks"in k&&t(19,Ne=k.line_breaks),"autoscroll"in k&&t(44,B=k.autoscroll),"theme_mode"in k&&t(20,Ve=k.theme_mode),"i18n"in k&&t(21,De=k.i18n),"layout"in k&&t(22,Ke=k.layout),"placeholder"in k&&t(23,Ie=k.placeholder),"upload"in k&&t(24,ye=k.upload),"msg_format"in k&&t(25,de=k.msg_format),"examples"in k&&t(26,Qe=k.examples),"_retryable"in k&&t(27,Be=k._retryable),"_undoable"in k&&t(28,ue=k._undoable),"like_user_message"in k&&t(29,Xe=k.like_user_message),"root"in k&&t(30,xe=k.root)},l.$$.update=()=>{l.$$.dirty[0]&1&&b(),l.$$.dirty[0]&33|l.$$.dirty[1]&1&&(s||h||f)&&ge(),l.$$.dirty[0]&1|l.$$.dirty[1]&16384&&(vo(s,o)||(t(45,o=s),G("change"))),l.$$.dirty[0]&33554433&&t(37,n=s&&ss(s)),l.$$.dirty[0]&1&&t(38,i=s&&$n())},[s,r,_,u,m,h,w,d,v,S,$,C,x,ne,z,he,j,Le,Me,Ne,Ve,De,Ke,Ie,ye,de,Qe,Be,ue,Xe,xe,f,Ee,ze,Ae,W,et,n,i,c,G,p,xt,a,B,o,Cn,yn,zn,Sn,jn,Hn,g,co]}class J_ extends j_{constructor(e){super(),M_(this,e,O_,P_,V_,{value:0,_fetch:1,load_component:43,allow_file_downloads:2,display_consecutive_in_same_bubble:3,latex_delimiters:4,pending_message:5,generating:6,selectable:7,likeable:8,feedback_options:9,feedback_value:10,editable:11,show_share_button:12,show_copy_all_button:13,rtl:14,show_copy_button:15,avatar_images:16,sanitize_html:17,render_markdown:18,line_breaks:19,autoscroll:44,theme_mode:20,i18n:21,layout:22,placeholder:23,upload:24,msg_format:25,examples:26,_retryable:27,_undoable:28,like_user_message:29,root:30},null,[-1,-1,-1])}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),L()}get _fetch(){return this.$$.ctx[1]}set _fetch(e){this.$$set({_fetch:e}),L()}get load_component(){return this.$$.ctx[43]}set load_component(e){this.$$set({load_component:e}),L()}get allow_file_downloads(){return this.$$.ctx[2]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),L()}get display_consecutive_in_same_bubble(){return this.$$.ctx[3]}set display_consecutive_in_same_bubble(e){this.$$set({display_consecutive_in_same_bubble:e}),L()}get latex_delimiters(){return this.$$.ctx[4]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),L()}get pending_message(){return this.$$.ctx[5]}set pending_message(e){this.$$set({pending_message:e}),L()}get generating(){return this.$$.ctx[6]}set generating(e){this.$$set({generating:e}),L()}get selectable(){return this.$$.ctx[7]}set selectable(e){this.$$set({selectable:e}),L()}get likeable(){return this.$$.ctx[8]}set likeable(e){this.$$set({likeable:e}),L()}get feedback_options(){return this.$$.ctx[9]}set feedback_options(e){this.$$set({feedback_options:e}),L()}get feedback_value(){return this.$$.ctx[10]}set feedback_value(e){this.$$set({feedback_value:e}),L()}get editable(){return this.$$.ctx[11]}set editable(e){this.$$set({editable:e}),L()}get show_share_button(){return this.$$.ctx[12]}set show_share_button(e){this.$$set({show_share_button:e}),L()}get show_copy_all_button(){return this.$$.ctx[13]}set show_copy_all_button(e){this.$$set({show_copy_all_button:e}),L()}get rtl(){return this.$$.ctx[14]}set rtl(e){this.$$set({rtl:e}),L()}get show_copy_button(){return this.$$.ctx[15]}set show_copy_button(e){this.$$set({show_copy_button:e}),L()}get avatar_images(){return this.$$.ctx[16]}set avatar_images(e){this.$$set({avatar_images:e}),L()}get sanitize_html(){return this.$$.ctx[17]}set sanitize_html(e){this.$$set({sanitize_html:e}),L()}get render_markdown(){return this.$$.ctx[18]}set render_markdown(e){this.$$set({render_markdown:e}),L()}get line_breaks(){return this.$$.ctx[19]}set line_breaks(e){this.$$set({line_breaks:e}),L()}get autoscroll(){return this.$$.ctx[44]}set autoscroll(e){this.$$set({autoscroll:e}),L()}get theme_mode(){return this.$$.ctx[20]}set theme_mode(e){this.$$set({theme_mode:e}),L()}get i18n(){return this.$$.ctx[21]}set i18n(e){this.$$set({i18n:e}),L()}get layout(){return this.$$.ctx[22]}set layout(e){this.$$set({layout:e}),L()}get placeholder(){return this.$$.ctx[23]}set placeholder(e){this.$$set({placeholder:e}),L()}get upload(){return this.$$.ctx[24]}set upload(e){this.$$set({upload:e}),L()}get msg_format(){return this.$$.ctx[25]}set msg_format(e){this.$$set({msg_format:e}),L()}get examples(){return this.$$.ctx[26]}set examples(e){this.$$set({examples:e}),L()}get _retryable(){return this.$$.ctx[27]}set _retryable(e){this.$$set({_retryable:e}),L()}get _undoable(){return this.$$.ctx[28]}set _undoable(e){this.$$set({_undoable:e}),L()}get like_user_message(){return this.$$.ctx[29]}set like_user_message(e){this.$$set({like_user_message:e}),L()}get root(){return this.$$.ctx[30]}set root(e){this.$$set({root:e}),L()}}const W_=J_,{SvelteComponent:G_,append:Y_,assign:K_,attr:Q_,check_outros:Ti,create_component:kn,destroy_component:pn,detach:Fi,element:X_,flush:H,get_spread_object:x_,get_spread_update:eu,group_outros:Zi,init:tu,insert:Ui,mount_component:vn,safe_not_equal:nu,space:Pi,transition_in:He,transition_out:lt}=window.__gradio__svelte__internal;function Ri(l){let e,t;const n=[{autoscroll:l[26].autoscroll},{i18n:l[26].i18n},l[29],{show_progress:l[29].show_progress==="hidden"?"hidden":"minimal"}];let i={};for(let s=0;s<n.length;s+=1)i=K_(i,n[s]);return e=new So({props:i}),e.$on("clear_status",l[41]),{c(){kn(e.$$.fragment)},m(s,o){vn(e,s,o),t=!0},p(s,o){const r=o[0]&603979776?eu(n,[o[0]&67108864&&{autoscroll:s[26].autoscroll},o[0]&67108864&&{i18n:s[26].i18n},o[0]&536870912&&x_(s[29]),o[0]&536870912&&{show_progress:s[29].show_progress==="hidden"?"hidden":"minimal"}]):{};e.$set(r)},i(s){t||(He(e.$$.fragment,s),t=!0)},o(s){lt(e.$$.fragment,s),t=!1},d(s){pn(e,s)}}}function Oi(l){let e,t;return e=new zo({props:{show_label:l[7],Icon:Vo,float:!0,label:l[6]||"Chatbot"}}),{c(){kn(e.$$.fragment)},m(n,i){vn(e,n,i),t=!0},p(n,i){const s={};i[0]&128&&(s.show_label=n[7]),i[0]&64&&(s.label=n[6]||"Chatbot"),e.$set(s)},i(n){t||(He(e.$$.fragment,n),t=!0)},o(n){lt(e.$$.fragment,n),t=!1},d(n){pn(e,n)}}}function lu(l){let e,t,n,i,s,o=l[29]&&Ri(l),r=l[7]&&Oi(l);return i=new W_({props:{i18n:l[26].i18n,selectable:l[8],likeable:l[9],feedback_options:l[10],feedback_value:l[11],show_share_button:l[12],show_copy_all_button:l[15],value:l[39],latex_delimiters:l[25],display_consecutive_in_same_bubble:l[24],render_markdown:l[19],theme_mode:l[37],editable:l[34],pending_message:l[29]?.status==="pending",generating:l[29]?.status==="generating",rtl:l[13],show_copy_button:l[14],like_user_message:l[28],avatar_images:l[27],sanitize_html:l[16],line_breaks:l[20],autoscroll:l[21],layout:l[17],placeholder:l[35],examples:l[36],_retryable:l[22],_undoable:l[23],upload:l[42],_fetch:l[43],load_component:l[26].load_component,msg_format:l[18],root:l[26].root,allow_file_downloads:l[38]}}),i.$on("change",l[44]),i.$on("select",l[45]),i.$on("like",l[46]),i.$on("share",l[47]),i.$on("error",l[48]),i.$on("example_select",l[49]),i.$on("option_select",l[50]),i.$on("retry",l[51]),i.$on("undo",l[52]),i.$on("clear",l[53]),i.$on("copy",l[54]),i.$on("edit",l[55]),{c(){o&&o.c(),e=Pi(),t=X_("div"),r&&r.c(),n=Pi(),kn(i.$$.fragment),Q_(t,"class","wrapper svelte-g3p8na")},m(a,_){o&&o.m(a,_),Ui(a,e,_),Ui(a,t,_),r&&r.m(t,null),Y_(t,n),vn(i,t,null),s=!0},p(a,_){a[29]?o?(o.p(a,_),_[0]&536870912&&He(o,1)):(o=Ri(a),o.c(),He(o,1),o.m(e.parentNode,e)):o&&(Zi(),lt(o,1,1,()=>{o=null}),Ti()),a[7]?r?(r.p(a,_),_[0]&128&&He(r,1)):(r=Oi(a),r.c(),He(r,1),r.m(t,n)):r&&(Zi(),lt(r,1,1,()=>{r=null}),Ti());const u={};_[0]&67108864&&(u.i18n=a[26].i18n),_[0]&256&&(u.selectable=a[8]),_[0]&512&&(u.likeable=a[9]),_[0]&1024&&(u.feedback_options=a[10]),_[0]&2048&&(u.feedback_value=a[11]),_[0]&4096&&(u.show_share_button=a[12]),_[0]&32768&&(u.show_copy_all_button=a[15]),_[1]&256&&(u.value=a[39]),_[0]&33554432&&(u.latex_delimiters=a[25]),_[0]&16777216&&(u.display_consecutive_in_same_bubble=a[24]),_[0]&524288&&(u.render_markdown=a[19]),_[1]&64&&(u.theme_mode=a[37]),_[1]&8&&(u.editable=a[34]),_[0]&536870912&&(u.pending_message=a[29]?.status==="pending"),_[0]&536870912&&(u.generating=a[29]?.status==="generating"),_[0]&8192&&(u.rtl=a[13]),_[0]&16384&&(u.show_copy_button=a[14]),_[0]&268435456&&(u.like_user_message=a[28]),_[0]&134217728&&(u.avatar_images=a[27]),_[0]&65536&&(u.sanitize_html=a[16]),_[0]&1048576&&(u.line_breaks=a[20]),_[0]&2097152&&(u.autoscroll=a[21]),_[0]&131072&&(u.layout=a[17]),_[1]&16&&(u.placeholder=a[35]),_[1]&32&&(u.examples=a[36]),_[0]&4194304&&(u._retryable=a[22]),_[0]&8388608&&(u._undoable=a[23]),_[0]&67108864&&(u.upload=a[42]),_[0]&67108864&&(u._fetch=a[43]),_[0]&67108864&&(u.load_component=a[26].load_component),_[0]&262144&&(u.msg_format=a[18]),_[0]&67108864&&(u.root=a[26].root),_[1]&128&&(u.allow_file_downloads=a[38]),i.$set(u)},i(a){s||(He(o),He(r),He(i.$$.fragment,a),s=!0)},o(a){lt(o),lt(r),lt(i.$$.fragment,a),s=!1},d(a){a&&(Fi(e),Fi(t)),o&&o.d(a),r&&r.d(),pn(i)}}}function iu(l){let e,t;return e=new yo({props:{elem_id:l[1],elem_classes:l[2],visible:l[3],padding:!1,scale:l[4],min_width:l[5],height:l[30],resizeable:l[31],min_height:l[32],max_height:l[33],allow_overflow:!0,flex:!0,overflow_behavior:"auto",$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){kn(e.$$.fragment)},m(n,i){vn(e,n,i),t=!0},p(n,i){const s={};i[0]&2&&(s.elem_id=n[1]),i[0]&4&&(s.elem_classes=n[2]),i[0]&8&&(s.visible=n[3]),i[0]&16&&(s.scale=n[4]),i[0]&32&&(s.min_width=n[5]),i[0]&1073741824&&(s.height=n[30]),i[1]&1&&(s.resizeable=n[31]),i[1]&2&&(s.min_height=n[32]),i[1]&4&&(s.max_height=n[33]),i[0]&1073741761|i[1]&33554936&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){t||(He(e.$$.fragment,n),t=!0)},o(n){lt(e.$$.fragment,n),t=!1},d(n){pn(e,n)}}}function ou(l,e,t){let{elem_id:n=""}=e,{elem_classes:i=[]}=e,{visible:s=!0}=e,{value:o=[]}=e,{scale:r=null}=e,{min_width:a=void 0}=e,{label:_}=e,{show_label:u=!0}=e,{root:f}=e,{_selectable:c=!1}=e,{likeable:b=!1}=e,{feedback_options:m=["Like","Dislike"]}=e,{feedback_value:h=null}=e,{show_share_button:w=!1}=e,{rtl:d=!1}=e,{show_copy_button:v=!0}=e,{show_copy_all_button:S=!1}=e,{sanitize_html:$=!0}=e,{layout:C="bubble"}=e,{type:x="tuples"}=e,{render_markdown:ne=!0}=e,{line_breaks:z=!0}=e,{autoscroll:he=!0}=e,{_retryable:j=!1}=e,{_undoable:Le=!1}=e,{group_consecutive_messages:Me=!0}=e,{latex_delimiters:Ne}=e,{gradio:B}=e,Ve=[],{avatar_images:De=[null,null]}=e,{like_user_message:Ke=!1}=e,{loading_status:Ie=void 0}=e,{height:ye}=e,{resizeable:de}=e,{min_height:Qe}=e,{max_height:Be}=e,{editable:ue=null}=e,{placeholder:Xe=null}=e,{examples:xe=null}=e,{theme_mode:Ee}=e,{allow_file_downloads:ze=!0}=e;const Ae=()=>B.dispatch("clear_status",Ie),W=(...g)=>B.client.upload(...g),et=(...g)=>B.client.fetch(...g),G=()=>B.dispatch("change",o),Vt=g=>B.dispatch("select",g.detail),p=g=>B.dispatch("like",g.detail),ge=g=>B.dispatch("share",g.detail),xt=g=>B.dispatch("error",g.detail),$n=g=>B.dispatch("example_select",g.detail),Cn=g=>B.dispatch("option_select",g.detail),yn=g=>B.dispatch("retry",g.detail),zn=g=>B.dispatch("undo",g.detail),Sn=()=>{t(0,o=[]),B.dispatch("clear")},jn=g=>B.dispatch("copy",g.detail),Hn=g=>{o===null||o.length===0||(x==="messages"?t(0,o[g.detail.index].content=g.detail.value,o):t(0,o[g.detail.index[0]][g.detail.index[1]]=g.detail.value,o),t(0,o),B.dispatch("edit",g.detail))};return l.$$set=g=>{"elem_id"in g&&t(1,n=g.elem_id),"elem_classes"in g&&t(2,i=g.elem_classes),"visible"in g&&t(3,s=g.visible),"value"in g&&t(0,o=g.value),"scale"in g&&t(4,r=g.scale),"min_width"in g&&t(5,a=g.min_width),"label"in g&&t(6,_=g.label),"show_label"in g&&t(7,u=g.show_label),"root"in g&&t(40,f=g.root),"_selectable"in g&&t(8,c=g._selectable),"likeable"in g&&t(9,b=g.likeable),"feedback_options"in g&&t(10,m=g.feedback_options),"feedback_value"in g&&t(11,h=g.feedback_value),"show_share_button"in g&&t(12,w=g.show_share_button),"rtl"in g&&t(13,d=g.rtl),"show_copy_button"in g&&t(14,v=g.show_copy_button),"show_copy_all_button"in g&&t(15,S=g.show_copy_all_button),"sanitize_html"in g&&t(16,$=g.sanitize_html),"layout"in g&&t(17,C=g.layout),"type"in g&&t(18,x=g.type),"render_markdown"in g&&t(19,ne=g.render_markdown),"line_breaks"in g&&t(20,z=g.line_breaks),"autoscroll"in g&&t(21,he=g.autoscroll),"_retryable"in g&&t(22,j=g._retryable),"_undoable"in g&&t(23,Le=g._undoable),"group_consecutive_messages"in g&&t(24,Me=g.group_consecutive_messages),"latex_delimiters"in g&&t(25,Ne=g.latex_delimiters),"gradio"in g&&t(26,B=g.gradio),"avatar_images"in g&&t(27,De=g.avatar_images),"like_user_message"in g&&t(28,Ke=g.like_user_message),"loading_status"in g&&t(29,Ie=g.loading_status),"height"in g&&t(30,ye=g.height),"resizeable"in g&&t(31,de=g.resizeable),"min_height"in g&&t(32,Qe=g.min_height),"max_height"in g&&t(33,Be=g.max_height),"editable"in g&&t(34,ue=g.editable),"placeholder"in g&&t(35,Xe=g.placeholder),"examples"in g&&t(36,xe=g.examples),"theme_mode"in g&&t(37,Ee=g.theme_mode),"allow_file_downloads"in g&&t(38,ze=g.allow_file_downloads)},l.$$.update=()=>{l.$$.dirty[0]&262145|l.$$.dirty[1]&512&&t(39,Ve=x==="tuples"?os(o,f):is(o,f))},[o,n,i,s,r,a,_,u,c,b,m,h,w,d,v,S,$,C,x,ne,z,he,j,Le,Me,Ne,B,De,Ke,Ie,ye,de,Qe,Be,ue,Xe,xe,Ee,ze,Ve,f,Ae,W,et,G,Vt,p,ge,xt,$n,Cn,yn,zn,Sn,jn,Hn]}class Bu extends G_{constructor(e){super(),tu(this,e,ou,iu,nu,{elem_id:1,elem_classes:2,visible:3,value:0,scale:4,min_width:5,label:6,show_label:7,root:40,_selectable:8,likeable:9,feedback_options:10,feedback_value:11,show_share_button:12,rtl:13,show_copy_button:14,show_copy_all_button:15,sanitize_html:16,layout:17,type:18,render_markdown:19,line_breaks:20,autoscroll:21,_retryable:22,_undoable:23,group_consecutive_messages:24,latex_delimiters:25,gradio:26,avatar_images:27,like_user_message:28,loading_status:29,height:30,resizeable:31,min_height:32,max_height:33,editable:34,placeholder:35,examples:36,theme_mode:37,allow_file_downloads:38},null,[-1,-1])}get elem_id(){return this.$$.ctx[1]}set elem_id(e){this.$$set({elem_id:e}),H()}get elem_classes(){return this.$$.ctx[2]}set elem_classes(e){this.$$set({elem_classes:e}),H()}get visible(){return this.$$.ctx[3]}set visible(e){this.$$set({visible:e}),H()}get value(){return this.$$.ctx[0]}set value(e){this.$$set({value:e}),H()}get scale(){return this.$$.ctx[4]}set scale(e){this.$$set({scale:e}),H()}get min_width(){return this.$$.ctx[5]}set min_width(e){this.$$set({min_width:e}),H()}get label(){return this.$$.ctx[6]}set label(e){this.$$set({label:e}),H()}get show_label(){return this.$$.ctx[7]}set show_label(e){this.$$set({show_label:e}),H()}get root(){return this.$$.ctx[40]}set root(e){this.$$set({root:e}),H()}get _selectable(){return this.$$.ctx[8]}set _selectable(e){this.$$set({_selectable:e}),H()}get likeable(){return this.$$.ctx[9]}set likeable(e){this.$$set({likeable:e}),H()}get feedback_options(){return this.$$.ctx[10]}set feedback_options(e){this.$$set({feedback_options:e}),H()}get feedback_value(){return this.$$.ctx[11]}set feedback_value(e){this.$$set({feedback_value:e}),H()}get show_share_button(){return this.$$.ctx[12]}set show_share_button(e){this.$$set({show_share_button:e}),H()}get rtl(){return this.$$.ctx[13]}set rtl(e){this.$$set({rtl:e}),H()}get show_copy_button(){return this.$$.ctx[14]}set show_copy_button(e){this.$$set({show_copy_button:e}),H()}get show_copy_all_button(){return this.$$.ctx[15]}set show_copy_all_button(e){this.$$set({show_copy_all_button:e}),H()}get sanitize_html(){return this.$$.ctx[16]}set sanitize_html(e){this.$$set({sanitize_html:e}),H()}get layout(){return this.$$.ctx[17]}set layout(e){this.$$set({layout:e}),H()}get type(){return this.$$.ctx[18]}set type(e){this.$$set({type:e}),H()}get render_markdown(){return this.$$.ctx[19]}set render_markdown(e){this.$$set({render_markdown:e}),H()}get line_breaks(){return this.$$.ctx[20]}set line_breaks(e){this.$$set({line_breaks:e}),H()}get autoscroll(){return this.$$.ctx[21]}set autoscroll(e){this.$$set({autoscroll:e}),H()}get _retryable(){return this.$$.ctx[22]}set _retryable(e){this.$$set({_retryable:e}),H()}get _undoable(){return this.$$.ctx[23]}set _undoable(e){this.$$set({_undoable:e}),H()}get group_consecutive_messages(){return this.$$.ctx[24]}set group_consecutive_messages(e){this.$$set({group_consecutive_messages:e}),H()}get latex_delimiters(){return this.$$.ctx[25]}set latex_delimiters(e){this.$$set({latex_delimiters:e}),H()}get gradio(){return this.$$.ctx[26]}set gradio(e){this.$$set({gradio:e}),H()}get avatar_images(){return this.$$.ctx[27]}set avatar_images(e){this.$$set({avatar_images:e}),H()}get like_user_message(){return this.$$.ctx[28]}set like_user_message(e){this.$$set({like_user_message:e}),H()}get loading_status(){return this.$$.ctx[29]}set loading_status(e){this.$$set({loading_status:e}),H()}get height(){return this.$$.ctx[30]}set height(e){this.$$set({height:e}),H()}get resizeable(){return this.$$.ctx[31]}set resizeable(e){this.$$set({resizeable:e}),H()}get min_height(){return this.$$.ctx[32]}set min_height(e){this.$$set({min_height:e}),H()}get max_height(){return this.$$.ctx[33]}set max_height(e){this.$$set({max_height:e}),H()}get editable(){return this.$$.ctx[34]}set editable(e){this.$$set({editable:e}),H()}get placeholder(){return this.$$.ctx[35]}set placeholder(e){this.$$set({placeholder:e}),H()}get examples(){return this.$$.ctx[36]}set examples(e){this.$$set({examples:e}),H()}get theme_mode(){return this.$$.ctx[37]}set theme_mode(e){this.$$set({theme_mode:e}),H()}get allow_file_downloads(){return this.$$.ctx[38]}set allow_file_downloads(e){this.$$set({allow_file_downloads:e}),H()}}export{W_ as BaseChatBot,Bu as default};
//# sourceMappingURL=Index-Bfut26A0.js.map
